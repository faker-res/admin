(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11510972"],{5533:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"v2-search"},[a("Form",{ref:"searchKey",attrs:{inline:""}},[a("FormItem",{attrs:{label:"等级"}},[a("LevelSelect",{ref:"LevelSelect",attrs:{placeholder:"全部",width:"86",levelType:"member"},on:{"on-level-change":e.levelChange}})],1),a("FormItem",{attrs:{label:"客户端"}},[a("Select",{staticClass:"s-86",attrs:{clearable:""},model:{value:e.searchKey.lastDevice,callback:function(t){e.$set(e.searchKey,"lastDevice",t)},expression:"searchKey.lastDevice"}},e._l(e.platformList,function(t,s){return a("Option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),a("FormItem",[a("Checkbox",{model:{value:e.searchKey.isLike,callback:function(t){e.$set(e.searchKey,"isLike",t)},expression:"searchKey.isLike"}},[a("span",{staticClass:"pl5"},[e._v("模糊")])])],1),a("FormItem",[a("Select",{staticClass:"s-100",model:{value:e.searchKey.typeTag,callback:function(t){e.$set(e.searchKey,"typeTag",t)},expression:"searchKey.typeTag"}},[a("Option",{attrs:{value:"userName"}},[e._v("会员账号")]),a("Option",{attrs:{value:"agencyName"}},[e._v("上级代理")]),a("Option",{attrs:{value:"phone"}},[e._v("手机号码")]),a("Option",{attrs:{value:"email"}},[e._v("Email")]),a("Option",{attrs:{value:"wechat"}},[e._v("微信号")]),a("Option",{attrs:{value:"shareholder"}},[e._v("大股东")]),a("Option",{attrs:{value:"realName"}},[e._v("姓名")])],1)],1),a("FormItem",[a("Input",{staticClass:"s-140",attrs:{placeholder:"1"==e.searchKey.isLike?"单个查询":"多个请以,逗号隔开",disabled:!e.searchKey.typeTag},model:{value:e.searchKey.content,callback:function(t){e.$set(e.searchKey,"content",t)},expression:"searchKey.content"}})],1),a("FormItem",[a("Button",{staticClass:"search",attrs:{type:"primary",loading:e.$root.searchBtnLoading},on:{click:e.searchSubmit}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"v2-table"},[a("Tables",{attrs:{editable:"",columns:e.table.columns,loading:e.$root.tableLoading,value:e.table.data,total:e.table.total,pageSizeOpts:e.table.pageSizeOpts},on:{"on-delete":e.onDelete,"on-page-change":e.onPageChange,"on-page-size-change":e.onPageSizeChange,"on-sort-change":e.sortChange}})],1),a("Modals",{ref:"oneTabFundsModal",attrs:{title:e.fundsModalTitle}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("Tabs",{attrs:{type:"card",value:"single"}},[a("TabPane",{attrs:{label:"加款/减款",name:"single"}},[a("FundsForms",{ref:"oneTabFundsForms",attrs:{mode:"single",oprateTypes:e.oprateTypes},on:{"on-submit":e.submitFundsForm}})],1)],1)],1)]),a("Modals",{ref:"twoTabFundsModal",attrs:{title:e.fundsModalTitle}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("Tabs",{attrs:{type:"card",animated:!1,value:"single"},on:{"on-click":e.tabChange}},[a("TabPane",{attrs:{label:"加款/减款",name:"single"}},[a("FundsForms",{ref:"twoTabFundsForms",attrs:{mode:"single",oprateTypes:e.oprateTypes},on:{"on-submit":e.submitFundsForm}})],1),a("TabPane",{attrs:{label:"批量加款/减款",name:"batch"}},[a("FundsForms",{attrs:{mode:"batch",oprateTypes:e.oprateTypes},on:{"on-submit":e.submitFundsForm}})],1)],1)],1)]),a("Modals",{ref:"historyModal",attrs:{title:"历史登陆"}},[a("div",{staticClass:"modal-overflow",attrs:{slot:"content"},slot:"content"},[a("Tables",{attrs:{columns:e.historyTable.columns,loading:e.historyTable.loading,value:e.historyTable.data,page:!1}})],1)]),a("member-code-detail",{attrs:{codeDetailTitle:"codeDetail"}})],1)},n=[],i=(a("6762"),a("2fdb"),a("28a5"),a("75fc")),o=a("cebc"),l=(a("7f7f"),a("c5f6"),a("fa69")),r=a("83ae"),c=a("d027"),u=a("1055"),d=a("4475"),m=a("e069"),p=a("c276"),h=a("8da3"),y=a("8194"),b=a("fab6"),f={name:"memberOnline",mixins:[b["a"]],components:{Tables:l["a"],Icons:r["a"],Modals:c["a"],FundsForms:u["a"],LevelSelect:d["a"],memberCodeDetail:h["a"]},data:function(){var e=this;this.$createElement;return{adminType:Object(p["l"])(),authInPage:JSON.parse(localStorage.authInPage),page:1,platformList:[{value:"pc",name:"PC"},{value:"h5",name:"H5"},{value:"ios",name:"IOS"},{value:"android",name:"Android"}],Time:[],fundsModalTitle:"加款/减款",searchKey:{status:"online",typeTag:"userName"},oprateTypes:{add:{manual:{id:0,type:"deposit",subType:"manual",class:"存款",subClass:"人工汇款"},giftBonusAdmin:{id:1,type:"bonus",subType:"giftBonusAdmin",class:"彩金",subClass:"彩金派送"},RebateBonus:{type:"bonus",subType:"manualRebateBonus",class:"返水",subClass:"返水派送"},bonus:{id:3,type:"bonus",subType:"manualBonus",class:"优惠",subClass:"汇款优惠"},transfer:{id:4,type:"deposit",subType:"transfer",class:"额度转换",subClass:"额度转换失败"},other:{id:5,type:"other",subType:"other",class:"其他",subClass:"其他"}},reduce:{manual:{id:6,type:"withdrawals",subType:"manual",class:"取款",subClass:"人工提出"},other:{id:7,type:"other",subType:"other",class:"其他",subClass:"其他"}}},table:{loading:!0,total:0,pageSizeOpts:[20,30,40,50],columns:[{title:"会员账号",key:"userName",align:"center",width:180,render:function(t,a){var s=!0;return t(m["Tooltip"],{attrs:{placement:"right",title:a.row.userName.length>9?a.row.userName:""}},[t("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"}},[t("span",{style:{width:"135px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},on:{click:function(t){s&&e.$store.commit("setCodeDetail",{uid:a.row.uid,time:(new Date).getTime(),title:"codeDetail"})},mousemove:function(e){e.movementX>4&&(s=!1)},mousedown:function(){s=!0}}},[a.row.userName]),t(r["a"],{attrs:{type:"huiyuanchaxunzaixian",color:"off"==a.row.online?"#B3B3B3":"#57A3F3",size:"20"}})]),t("div",{slot:"content"},["off"===a.row.online?"离线":a.row.lastDevice+"在线"])])}},{title:"姓名",key:"realname",align:"center",render:function(t,a){return t("span",[e.$root.text(a.row.realName)])}},{title:"账号类型",key:"account_type",align:"center"},{title:"等级",key:"levelAlias",align:"center"},{title:"上级代理",key:"agencyName",align:"center"},{title:"余额",key:"balance",align:"center",sortable:"custom",render:function(t,a){var s=a.row.wallet,n=s.last,i=s.list;return t(m["Tooltip"],{attrs:{placement:"bottom",width:"900px"},style:"{display: block}",class:"money-tip"},[t("a",{class:"blue-font"},[Number(n.balance).toFixed(2)]),t("div",{slot:"content"},[t("div",[t("div",{class:"tooltip-title flex-row"},[t("div",{class:"txt-right-liner mt10",style:{display:"super"==e.adminType||-1!=e.authInPage.indexOf("thirdBalanceRecycle")?"inline-block":"none"}},[t(r["a"],{attrs:{type:"huiyuanchaxunzhuanhui",color:"#FFF",size:"20"}}),t("span",{class:"icon-right-txt",on:{click:function(t){e.changeBalance(a)}}},["转回"])]),t("div",{class:"txt-right-liner mt10",style:{display:"super"==e.adminType||-1!=e.authInPage.indexOf("refreshThirdBalance")?"inline-block":"none"}},[t(r["a"],{attrs:{type:"huiyuanchaxunshuaxin",color:"#FFF",size:"18"}}),t("span",{class:"icon-right-txt",on:{click:function(t){e.refreshBalance(a)}}},["刷新"])])]),t("div",{class:"tooltip-section pb10 flex-row"},[i.length?i.map(function(e,a){return t("div",{class:"items balance"},[e.name,":",Number(e.balance).toFixed(2)])}):t("div",{class:"item",style:{textAlign:"center",width:"100%"}},["加载中"])])])])])}},{title:"借呗",key:"lastWithdrawalsTime",align:"center",render:function(e,t){return e(m["Tooltip"],{attrs:{placement:"bottom","max-width":"350"},class:"money-tip"},[e("a",{class:"blue-font"},["0"]),e("div",{slot:"content"},[e("div",{class:"tooltip-section pb10 borrow"},[e("div",{class:"items"},["可借: 0"]),e("div",{class:"items flex-row"},[e("span",["借款: 0"]),e("span",["时间: 2018.12.25"])]),e("div",{class:"items flex-row"},[e("span",["还款: 0"]),e("span",["时间: 2018.12.25"])])])])])}},{title:"注册时间",key:"created_at",align:"center",width:180,render:function(t,a){return t("span",{class:"pl20  pr20"},[e.$root.unixTime(a.row.created_at)])}},{title:"操作",align:"center",minWidth:150,render:function(t,a){return t("div",[t("span",{class:"ib mr10 blue-font",style:{display:"super"==e.adminType||-1!=e.authInPage.indexOf("memberModifyStatus")?"inline-block":"none",color:"yes"!==a.row.status?"red":""},on:{click:function(){e.changeStatus(a,"status")}}},["yes"==a.row.status?"状态正常":"状态停用"]),t("span",{class:"ib mr10 blue-font",style:{display:"super"==e.adminType||-1!=e.authInPage.indexOf("refundLevelModifyStatus")?"inline-block":"none",color:"yes"!==a.row.refundBonus?"red":""},on:{click:function(){e.changeStatus(a,"refundBonus")}}},["yes"===a.row.refundBonus?"返水正常":"返水停用"]),t("span",{class:"ib mr10 blue-font",style:{display:"super"==e.adminType||-1!=e.authInPage.indexOf("memberDetail")?"inline-block":"none"},on:{click:function(){e.$router.push({name:"memberDetails",query:{siteId:e.nowSite.id,uid:a.row.uid}})}}},["详情"]),t("span",{class:"ib mr10 blue-font",style:{display:"super"==e.adminType||-1!=e.authInPage.indexOf("memberUpdate")?"inline-block":"none"},on:{click:function(){var t=a.row,s=t.uid,n=t.siteId;e.$router.push({name:"memberEdit",params:{page:"edit"},query:{uid:s,siteId:n}})}}},["编辑"]),t("span",{class:"ib mr10 blue-font",on:{click:function(){1==a.row.is_agency?e.$Tip.info({content:"此功能暂未开放"}):e.changeStatus(a,"is_agency")}}},[1!==a.row.is_agency?"晋升代理":"降级会员"])])}}],data:[]},historyTable:{loading:!0,columns:[{title:"登陆设备",key:"device",align:"center"},{title:"登陆域名",key:"domain",align:"center"},{title:"登陆IP",key:"ip",align:"center"},{title:"归属地",key:"location",align:"center"},{title:"登陆时间",key:"created_at",align:"center",render:function(t,a){return t("span",[e.$root.unixTime(a.row.created_at)])}}],data:[]}}},computed:{modalKey:function(){var e=this.$route.meta.title;return"加款减款"!==e?"oneTabFundsModal":"twoTabFundsModal"},fundsKey:function(){var e=this.$route.meta.title;return"加款减款"!==e?"oneTabFundsForms":"twoTabFundsForms"}},watch:{nowSite:{handler:function(e,t){var a=this;this.$nextTick(function(){var t=a.$route.name;"memberOnline"===t&&a.$refs.LevelSelect.init(e.id)})},deep:!0,immediate:!0}},beforeRouteEnter:function(e,t,a){a(function(t){"加款减款"===e.meta.title&&t.$refs.twoTabFundsModal.show()})},methods:{levelChange:function(e){this.searchKey.levelId=e.levelLabel},onPageChange:function(e){var t=Object(o["a"])({},this.searchKey,{siteId:this.$root.nowSite.id});this.page=e,this.getData({params:t,query:{page:e}})},refreshBalance:function(e){var t=e.row,a=t.siteId,s=t.uid;e.row.wallet.list=[],Object(y["y"])({siteId:a,uid:s}).then(function(t){e.row.wallet.list=Object(i["a"])(t.data.platform_balance)})},changeBalance:function(e){var t=e.row,a=t.siteId,s=t.uid;this.$Tip.confirm({content:"您确定回收该用户的第三方余额吗？",onOk:function(){Object(y["E"])({siteId:a,uid:s})}})},getData:function(e){var t=this;this.$root.startTableLoading(),e.params.isLike&&(e.params.isLike=Number(e.params.isLike));var a=e.params,s=a.startTime,n=a.endTime;s&&delete e.params.startTime,n&&delete e.params.endTime,Object(y["g"])(e).then(function(e){var a=e.data,s=a.data,n=a.total;t.table.data=s,t.table.total=n})},onDelete:function(e){},searchSubmit:function(){var e=this.searchKey;e.siteId=this.$root.nowSite.id,e.content||delete e.content,this.getData({params:e})},searchReset:function(){},changeStatus:function(e,t){var a,s,n,i,o=this,l=e.row,r=l.status,c=l.refundBonus,u=l.is_agency;switch(t){case"status":a="yes"===r?"您确定要停用此会员账号吗?":"您确定要启用此会员账号吗?",s="yes"===r?"停用状态成功":"启用状态成功",n="yes"===r?0:1,i="yes"===r?"no":"yes";break;case"refundBonus":a="yes"===c?"您确定要停用此会员返水吗？":"您确定要启用此会员返水吗？",s="yes"===c?"停用返水成功":"启用返水成功",n="yes"===c?0:1,i="yes"===c?"no":"yes";break;case"is_agency":a=0==u?"您确定要升级此会员为代理吗？?":"您确定要降级该代理为会员吗？?",s=0==u?"晋升为代理成功":"降级为会员成功",n=0==u?1:0,i=0==u?1:0;break}var d={siteId:this.nowSite.id,uid:e.row.uid,statusKey:t,statusVal:n};this.$Tip.confirm({content:a,onOk:function(){Object(y["t"])(d).then(function(a){if(200==a.code){o.$Tip.hide(),o.$Message.success(s),e.row[t]=i;var n=e.row.account_type,l=n.split("级")[0];e.row.account_type="".concat(l,0==i?"级会员":"级代理")}})}})},tabChange:function(e){this.fundsModalTitle="single"===e?"加款/减款":"批量加款/减款"},submitFundsForm:function(e){var t=this;this.$root.startEditLoading(this),Object(y["l"])(e).then(function(a){if(200==a.code){e.handle;t.$refs[t.modalKey].hide(),t.fundsModalTitle.includes("批量")?t.$router.push({name:"memberFundsLog"}):t.$router.push({name:"memberOnline"})}})},loginHistory:function(e){var t=this;this.$refs.historyModal.show(),this.$refs,Object(y["m"])({siteId:e.siteId,uid:e.uid}).then(function(e){var a=e.data.basic;t.historyTable.loading=!0,setTimeout(function(){t.historyTable.data=a.login_history,t.historyTable.loading=!1},2e3)})},sortChange:function(e){var t=e.key,a=e.order,s=this.nowSite.id,n={sortKey:t,sortVal:a,siteId:s};"normal"==n.sortVal&&(delete n.sortKey,delete n.sortVal),this.sortParams={},this.sortParams=Object(o["a"])({},n),1!==this.page?this.getData({params:Object(o["a"])({},this.searchKey,n),query:{page:this.page}}):this.getData({params:Object(o["a"])({},this.searchKey,n)})}}},g=f,v=(a("ccea"),a("2877")),T=Object(v["a"])(g,s,n,!1,null,"7349ee96",null);t["default"]=T.exports},7507:function(e,t,a){},ccea:function(e,t,a){"use strict";var s=a("7507"),n=a.n(s);n.a}}]);