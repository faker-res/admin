(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-498c5ff3"],{"134a":function(e,t,a){},"3c43":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!==typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"42b5":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v2-edit"},[a("div",{staticClass:"items bb"},[a("div",{staticClass:"title"},[e._v("基础设置")]),a("div",{staticClass:"section backWater"},[a("Form",{key:e.$route.params.page,ref:"Form",attrs:{model:e.formKey,rules:e.rules}},[a("FormItem",{staticClass:"ti10",attrs:{label:"等级名称",prop:"levelName"}},["create"===e.$route.params.page?a("Level-select",{ref:"levelSelect",staticClass:"ib",attrs:{width:320,placeholder:"等级名称",levelType:"refund"},on:{"on-level-change":e.levelChange},model:{value:e.formKey.levelName,callback:function(t){e.$set(e.formKey,"levelName",t)},expression:"formKey.levelName"}}):a("Input",{staticClass:"w320x",attrs:{value:e.formKey.levelName,disabled:"edit"===e.$route.params.page,placeholder:"等级名称"}})],1),a("FormItem",{staticClass:"ti10",attrs:{label:"等级别称",prop:"levelAlias"}},[a("Input",{staticClass:"w320x",attrs:{placeholder:"等级别称"},model:{value:e.formKey.levelAlias,callback:function(t){e.$set(e.formKey,"levelAlias",t)},expression:"formKey.levelAlias"}})],1),a("FormItem",{staticClass:"ti10",attrs:{label:"最低下注",prop:"lessBetAmount"}},[a("Input-number",{staticClass:"w320x",attrs:{placeholder:"最低下注",precision:2,max:99999999.99,min:.01},model:{value:e.formKey.lessBetAmount,callback:function(t){e.$set(e.formKey,"lessBetAmount",t)},expression:"formKey.lessBetAmount"}})],1),a("FormItem",{staticClass:"ti10",attrs:{label:"最大返水",prop:"maxBonusAmonut"}},[a("Input-number",{staticClass:"w320x",attrs:{placeholder:"最大返水",precision:2,max:99999999.99,min:0},model:{value:e.formKey.maxBonusAmonut,callback:function(t){e.$set(e.formKey,"maxBonusAmonut",t)},expression:"formKey.maxBonusAmonut"}})],1),a("FormItem",{staticClass:"w25 ti10"},[a("div",{staticStyle:{"padding-left":"100px"}},["no"===e.formKey.default?a("Icon",{staticClass:"pr5",attrs:{type:"md-checkmark-circle",size:"16",color:"#E4E4E4"},on:{click:function(t){e.formKey.default="yes"}}}):a("Icon",{staticClass:"pr5",attrs:{type:"md-checkmark-circle",size:"16",color:"#57a3f3"},on:{click:function(t){e.formKey.default="no"}}}),a("span",{staticClass:"ml5"},[e._v("设为默认？")])],1)])],1)],1)]),a("div",{staticClass:"items mt15 bb"},[a("div",{staticClass:"section"},[a("RefundSelect",{ref:"RefundSelect",attrs:{data:e.refund},on:{"on-refund-change":e.onRefundChange}})],1)]),a("div",{staticClass:"items mt15"},[a("div",{staticClass:"flex-row p10"},[a("div",{staticClass:"w40 flex-row"},[a("Button",{staticClass:"more-btn",attrs:{type:"primary",loading:e.$root.editBtnLoading},on:{click:e.submit}},[e._v("确认提交")])],1)])])])},n=[],s=a("cebc"),i=a("83ae"),r=a("5c64"),o=a("4475"),u=a("8194"),c=a("2934"),m=(a("3c43"),{components:{Icons:i["a"],RefundSelect:r["a"],LevelSelect:o["a"]},data:function(){return{refund:[],formKey:{id:"",levelName:"",levelLabel:"",levelAlias:"",lessBetAmount:0,maxBonusAmonut:0,remark:"",default:"no"},rules:{levelName:[{required:!0,message:"请选择等级名称",trigger:"change"}],levelAlias:[{required:!0,message:"请输入返水等级别称",trigger:"blur"}],lessBetAmount:[{type:"number",required:!0,message:"请输入正确的最低下注金额",trigger:"blur"},{type:"number",pattern:/^(([0-9]{1}\d{0,7}\.\d{0,2})|([1-9]{1}\d{0,7})|(0\.[1-9]{1}\d?)|(0\.\d{1}[1-9]{1}))$/,message:"请输入正确的最低下注金额",trigger:"blur"}],maxBonusAmonut:[{type:"number",required:!0,message:"请输入最大返水金额",trigger:"blur"},{type:"number",pattern:/^(([1-9]{1}\d{0,7}\.\d{0,2})|([1-9]{1}\d{0,7})|(0\.[1-9]{1}\d?)|(0\.\d{1}[1-9]{1})|(0{1}))$/,message:"请输入正确最大返水金额限制",trigger:"blur"}],remark:[{required:!0,message:"请输入备注信息",trigger:"blur"}]}}},created:function(){var e=this.$route.query,t=e.siteId,a=e.id,l=this.$route.params.page,n={siteId:t,id:a};"edit"===l?(n.purpose="update",this.getData(n)):this.getDefaultRefund(),"create"===l&&this.getLevelName()},methods:{getDefaultRefund:function(){var e=this,t={siteId:1};Object(c["b"])(t).then(function(t){e.refund=t.data.zore})},onRefundChange:function(e){this.formKey.refund=e},getData:function(e){var t=this;Object(u["k"])(e).then(function(e){var a=e.data,l=a.basic,n=a.refund;if("edit"===t.$route.params.page){for(var s in t.formKey)t.formKey[s]=l[s];t.formKey.lessBetAmount=+l.lessBetAmount,t.formKey.maxBonusAmonut=+l.maxBonusAmonut}t.refund=n})},getLevelName:function(){var e=this;this.$nextTick(function(){e.$refs.levelSelect.init(e.$root.nowSite.id,{levelLabel:"1",levelName:"vip1"})})},levelChange:function(e){this.formKey.levelName=e.levelName,this.formKey.levelLabel=+e.levelLabel},submit:function(){var e=this;this.$refs.Form.validate(function(t){for(var a in e.formKey)e.formKey[a]||delete e.formKey[a];if(e.formKey.refund||(e.formKey.refund=e.$refs.RefundSelect.createData()),t){if("create"===e.$route.params.page){var l=e.$root.nowSite,n=l.siteName,i=l.id,r=Object(s["a"])({},e.formKey);r.siteId=i,r.siteName=n,r.default="yes"===r.default?1:0,r.lessBetAmount=+r.lessBetAmount,r.maxBonusAmonut=+r.maxBonusAmonut,e.$root.startEditLoading(),Object(u["z"])(r).then(function(t){t.code&&200==t.code&&e.$router.push({name:"memberRefund"})})}if("edit"===e.$route.params.page){var o=e.$route.query,c=o.siteId,m=(o.id,Object(s["a"])({},e.formKey));m.siteId=c,m.default="yes"===m.default?1:0,m.lessBetAmount=+m.lessBetAmount,m.maxBonusAmonut=+m.maxBonusAmonut,e.$root.startEditLoading(),Object(u["B"])(m).then(function(t){t.code&&200==t.code&&e.$Tip.success({content:"修改返水等级成功",onOk:function(){e.$router.go(-1)}})})}}})}}}),d=m,f=(a("b7b0"),a("2877")),v=Object(f["a"])(d,l,n,!1,null,"00d1f8c8",null);t["default"]=v.exports},4475:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["单选"===e.mode?a("div",[a("Select",{class:e.className,style:e._width,attrs:{clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder},model:{value:e.singleData.levelLabel,callback:function(t){e.$set(e.singleData,"levelLabel",t)},expression:"singleData.levelLabel"}},e._l(e.levelList,function(t){return a("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(!!t.levelAlias&&(!e.choiceShow&&t.levelAlias)||t.levelName))])}),1)],1):"多选"===e.mode?a("div",[a("Select",{ref:"selector",class:e.className,style:e._width,attrs:{clearable:e.clearable,multiple:"",disabled:e.disabled,placeholder:e.placeholder},model:{value:e.multipleData.levelLabel,callback:function(t){e.$set(e.multipleData,"levelLabel",t)},expression:"multipleData.levelLabel"}},[e.allModal?a("Option",{attrs:{value:"all"}},[e._v("全部")]):e._e(),e._l(e.levelList,function(t){return a("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(t.levelAlias||t.levelName))])})],2)],1):"单选全部"===e.mode?a("div",[a("Select",{class:e.className,style:e._width,attrs:{clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder},model:{value:e.singleData.levelLabel,callback:function(t){e.$set(e.singleData,"levelLabel",t)},expression:"singleData.levelLabel"}},[e.allModal?a("Option",{attrs:{value:"all"}},[e._v("全部")]):e._e(),e._l(e.levelList,function(t){return a("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(t.levelAlias||t.levelName))])})],2)],1):e._e()])},n=[],s=a("cebc"),i=(a("ac6a"),a("28a5"),a("96cf"),a("3b8d")),r=(a("6762"),a("2fdb"),a("c5f6"),a("8194")),o=a("f28b"),u={props:{choiceShow:{type:Boolean,default:!1},allModal:{type:Boolean,default:!1},mode:{type:String,default:"单选"},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:260},levelType:{type:String},className:{type:String}},data:function(){return{singleData:{levelLabel:""},multipleData:{levelLabel:[]},levelList:[],subType:""}},computed:{_width:function(){return"width:"+this.width+"px"}},watch:{"multipleData.levelLabel":function(e,t){!t.includes("all")&&e.includes("all")&&(this.multipleData.levelLabel=["all"]),t.includes("all")&&e.length>1&&this.multipleData.levelLabel.splice(e.indexOf("all"),1)},singleData:{handler:function(e,t){this.singleChange(e)},deep:!0},multipleData:{handler:function(e,t){this.multipleChange(e)},deep:!0},allModal:function(){this.checkAll()}},mounted:function(){this.checkAll()},methods:{checkAll:function(){},setDefaultLevel:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var l,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:"单选"===this.mode?(this.singleData.levelLabel=+t,this.singleData.levelName=a,this.$set(this.singleData,"levelLabel",+t)):"string"==typeof t?(l=t.split(","),l.forEach(function(e){n.multipleData.levelLabel.push(Number(e))})):this.multipleData.levelLabel=t;case 1:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),init:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var l,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("member"!==this.levelType){e.next=11;break}if("addLevel"!==this.subType){e.next=6;break}this.levelList=this.$store.state.info.memberLevelList,this.subType="",e.next=9;break;case 6:return e.next=8,this.getMemberLevel(t,"select");case 8:this.levelList=e.sent;case 9:e.next=18;break;case 11:if("agency"!==this.levelType){e.next=17;break}return e.next=14,this.getAgencyLevel(t,"select");case 14:this.levelList=e.sent,e.next=18;break;case 17:"refund"===this.levelType&&(this.levelList=this.$store.state.info.memberLevelList);case 18:return a&&(l=a.levelLabel,n=a.levelName,this.setDefaultLevel(l,n)),e.abrupt("return",this.levelList);case 20:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),singleChange:function(e){if(this.multipleData.levelLabel.includes("all")){var t={levelLabel:[],levelName:[]},a=[];this.levelList.forEach(function(e){t.levelLabel.push(e.levelLabel),t.levelName.push(e.levelName),a.push(e.levelLabel)}),this.$emit("on-level-change",t)}else{var l=Object(s["a"])({},this.singleData);this.levelList.forEach(function(t){e.levelLabel==t.levelLabel&&(l.levelName=t.levelName,l.id=t.id)}),this.$emit("on-level-change",l)}},multipleChange:function(e){if(this.multipleData.levelLabel.includes("all")){var t={levelLabel:[],levelName:[]},a=[];this.levelList.forEach(function(e){t.levelLabel.push(e.levelLabel),t.levelName.push(e.levelName),a.push(e.levelLabel)}),this.$emit("on-level-change",t)}else{var l=Object(s["a"])({},this.multipleData);l.levelName=[],this.levelList.forEach(function(e){l.levelLabel&&l.levelLabel.forEach(function(t){t==e.levelLabel&&l.levelName.push(e.levelName)})}),this.$emit("on-level-change",l)}},getMemberLevel:function(e,t){var a=this;return Object(r["e"])({siteId:e,purpose:t}).then(function(e){return a.$emit("sendLevelName",e.data),e.data})},getAgencyLevel:function(e,t){return Object(o["l"])({siteId:e,purpose:t}).then(function(e){return e.data})},reset:function(e){"undefined"===typeof e?this.multipleData.levelLabel=[]:"single"===e&&(this.singleData.levelLabel="")},changeSubType:function(e){this.subType=e}}},c=u,m=a("2877"),d=Object(m["a"])(c,l,n,!1,null,null,null),f=d.exports;t["a"]=f},"5c64":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("collapse",{attrs:{simple:"",value:"1"}},[a("panel",{attrs:{name:"1","hide-arrow":!0}},[a("div",{staticClass:"title",on:{click:function(t){e.open=!e.open}}},[e._v("\n      返水设置\n      "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.open,expression:"!open"}],attrs:{type:"ios-arrow-down",size:"18",color:"#999"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],attrs:{type:"ios-arrow-forward",size:"18",color:"#999"}})],1),a("div",{staticClass:"section p15",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"btns"},e._l(e._data_,function(t,l){return a("Button",{key:t.name,staticClass:"lottery mr20",class:e.showKey==l?"bd-bg":"bg-or",on:{click:function(t){return e.onselectMenu(l)}}},[e._v(e._s(t.name))])}),1),e._data_[e.showKey]?a("div",{staticClass:"clearfix info pt10"},e._l(e._data_[e.showKey].list,function(t){return a("div",{key:t.name_en,staticClass:"clearfix w20 h40 fl"},[a("div",{staticClass:"label fl"},[e._v(e._s(t.name_cn)+"：")]),e.$route.params.page?a("div",{staticClass:"fl"},[a("InputNumber",{staticClass:"w60xh36",attrs:{step:.1,max:t.parent_refund,min:0},on:{"on-change":e.onChange},model:{value:t.refund,callback:function(a){e.$set(t,"refund",a)},expression:"sub.refund"}}),e.showParent?a("span",{staticClass:"tip"},[a("span",{staticClass:"mr5"},[e._v("上限")]),e._v("\n              "+e._s(t.parent_refund.toFixed(2)||"-")+"\n            ")]):e._e()],1):a("div",[e._v(e._s(t.refund))])])}),0):e._e()])])],1)},n=[],s=a("f499"),i=a.n(s),r=(a("ac6a"),a("cebc")),o=a("83ae"),u=(a("c276"),{components:{Icons:o["a"]},props:{data:{type:[Object,Array],required:!0,default:function(){}},showParent:{type:Boolean,required:!1,default:!1}},data:function(){return{open:!1,showKey:"live"}},computed:{_data_:function(){var e=Object(r["a"])({},this.data);for(var t in e)e[t].list.forEach(function(e){e.refund=+e.refund,e.parent_refund=+e.parent_refund});return e}},methods:{onselectMenu:function(e){this.showKey=e},onChange:function(e){this.createData()},createData:function(){var e={};for(var t in this._data_)this._data_[t].list.forEach(function(t){e[t.name_en]=t.refund});return this.$emit("on-refund-change",i()(e)),i()(e)}}}),c=u,m=(a("6e9d"),a("2877")),d=Object(m["a"])(c,l,n,!1,null,"deef8c56",null),f=d.exports;t["a"]=f},"6e9d":function(e,t,a){"use strict";var l=a("134a"),n=a.n(l);n.a},a04c:function(e,t,a){},b7b0:function(e,t,a){"use strict";var l=a("a04c"),n=a.n(l);n.a}}]);