(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4566bae9"],{2016:function(t,e,a){"use strict";var r=a("9975"),n=a.n(r);n.a},9975:function(t,e,a){},a465:function(t,e,a){var r=a("63b6"),n=a("bf0b").f,i=a("e4ae");r(r.S,"Reflect",{deleteProperty:function(t,e){var a=n(i(t),e);return!(a&&!a.configurable)&&delete t[e]}})},b5b1:function(t,e,a){a("a465"),t.exports=a("584a").Reflect.deleteProperty},d656:function(t,e,a){t.exports=a("b5b1")},d8b9:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"v2-search"},[a("Form",{ref:"searchKey",attrs:{inline:""}},[a("GameSelect",{ref:"GameSelect",attrs:{showPlateform:!1},on:{"on-game-change":t.onGameChange}}),a("FormItem",{attrs:{label:"时区"}},[a("Select",{staticClass:"s-120",model:{value:t.searchKey.timeType,callback:function(e){t.$set(t.searchKey,"timeType",e)},expression:"searchKey.timeType"}},t._l(t.timeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1),a("FormItem",{attrs:{label:"开始时间"}},[a("DatePicker",{staticClass:"s-180",attrs:{type:"datetime",placeholder:"开始时间"},model:{value:t.Time[0],callback:function(e){t.$set(t.Time,0,e)},expression:"Time[0]"}})],1),a("FormItem",{attrs:{label:"结束时间"}},[a("DatePicker",{staticClass:"s-180",attrs:{type:"datetime",placeholder:"结束时间",format:"yyyy-MM-dd 23:59:59"},model:{value:t.Time[1],callback:function(e){t.$set(t.Time,1,e)},expression:"Time[1]"}})],1),a("FormItem",{attrs:{label:"会员账号"}},[a("Input",{staticClass:"s-140",attrs:{placeholder:"请输入会员账号"},model:{value:t.searchKey.userName,callback:function(e){t.$set(t.searchKey,"userName",e)},expression:"searchKey.userName"}})],1),a("FormItem",[a("Button",{staticClass:"search",attrs:{type:"primary",loading:t.$root.searchBtnLoading},on:{click:t.searchSubmit}},[t._v("查询")])],1),a("FormItem",[a("Button",{staticClass:"ivu-btn export",attrs:{type:"primary",loading:t.$root.exportBtnLoading},on:{click:t.exportExcel}},[t._v("导出EXCEL")])],1)],1)],1),a("div",{staticClass:"v2-table"},[a("Tables",{ref:"table",attrs:{loading:t.$root.tableLoading,columns:t.table.columns,total:t.table.total,value:t.table.data,pageSizeOpts:t.table.pageSizeOpts},on:{"on-page-change":t.onPageChange,"on-page-size-change":t.onPageSizeChange,"on-sort-change":t.sortChange}})],1)])},n=[],i=a("cebc"),o=(a("c5f6"),a("d656")),s=a.n(o),c=a("768b"),l=a("83ae"),m=a("fa69"),u=a("8be0"),p=a("fab6"),h=a("1c31"),d={name:"platformReport",mixins:[p["a"]],components:{Tables:m["a"],Icons:l["a"],GameSelect:u["a"]},data:function(){var t=this;this.$createElement;return{timeList:[{value:"cn",name:"北京时间"},{value:"en",name:"美东时间"}],searchKey:{timeType:"cn",startTime:this.$root.startTime(),endTime:this.$root.midnight()},Time:[this.$root.startTime(),this.$root.formatnightTimeS()],table:{total:0,pageSizeOpts:[20,30,40,50],data:[],columns:[{title:"游戏平台",align:"center",key:"platformName",render:function(e,a){var r=a.row.platformName;return e("span",{class:{"blue-font":"总计"!==r},on:{click:function(){t.goDetailPage(a)}}},[r])}},{title:"投注人数",key:"betUser",align:"center",sortable:"custom"},{title:"注单数量",key:"betCount",align:"center",sortable:"custom"},{title:"投注金额",key:"betAmount",align:"center",sortable:"custom",render:function(e,a){return e("span",[t.$root.keepTwo(a.row.betAmount)])}},{title:"有效投注",key:"validBetAmount",align:"center",sortable:"custom",render:function(e,a){return e("span",[t.$root.keepTwo(a.row.validBetAmount)])}},{title:"平台输赢",key:"netAmount",align:"center",sortable:"custom",render:function(e,a){return e("span",[t.$root.keepTwo(a.row.netAmount)])}},{title:"盈率",key:"winRate",align:"center",sortable:"custom",render:function(t,e){return t("span",["".concat(e.row.winRate,"%")])}},{align:"center",renderHeader:function(t,e){return t("div",[t("span","活动类型"),t("Poptip",{props:{trigger:"hover",content:"平台方活动"}},[t(l["a"],{props:{type:"bangzhutishi"},style:{color:"#b3b3b3",marginLeft:"5px"}})])])},render:function(t,e){return e.row.activity&&e.row.activity.length?e.row.activity.map(function(e){return t("div",{style:{color:"#666666"}},e.typeName)}):t("span","-")},width:"200"},{title:"活动人数",key:"activity",align:"center",render:function(t,e){return e.row.activity&&e.row.activity.length?e.row.activity.map(function(e){return t("div",{style:{color:"#666666"}},e.actUser)}):t("span","-")}},{title:"活动金额",key:"c",align:"center",render:function(t,e){return e.row.activity&&e.row.activity.length?e.row.activity.map(function(e){return t("div",{style:{color:"#666666"}},e.amount)}):t("span","-")}}]}}},created:function(){var t=this;this.$nextTick(function(){t.$refs.GameSelect.init()})},methods:{goDetailPage:function(t){var e=t.row.platform,a=this.searchKey.timeType,r=Object(c["a"])(this.Time,2),n=r[0],i=r[1];n=this.$root.formatTimeS(n),i=this.$root.formatnightTimeS(i),this.$router.push({name:"platformReportDetail",query:{platform:e,startTime:n,endTime:i,timeType:a}})},checkAll:function(t){return"ALL"===t&&s()(this.searchKey,"type")},onGameChange:function(t){this.checkAll(t)||(this.searchKey.type=t)},getData:function(t){var e=this,a=t.params;for(var r in a)a[r]||delete a[r];this.$root.startTableLoading(),t.params.isLike&&(t.params.isLike=Number(t.params.isLike)),t.params.type||delete t.params.type,this.table.data=[],Object(h["l"])(t).then(function(t){var a=t.data.data,r=a.list,n=a.total;r.length&&r.push(e.createTotalData(n)),e.table.data=r,e.table.total=t.data.total})},createTotalData:function(t){var e=t.betUser,a=t.betCount,r=t.betAmount,n=t.validBetAmount,i=t.netAmount,o=t.winRate,s=t.actUser,c=t.actAmount,l={platformName:"总计",betUser:e,betCount:a,betAmount:r,validBetAmount:n,netAmount:i,winRate:o,actUser:s,actAmount:c};return l},searchSubmit:function(){this.$refs.table.setPage();var t=Object(i["a"])({},this.searchKey);if(t.siteId=this.nowSite.id,!this.$root.validateTime(this.Time))return!1;var e=this.$root.validateTime(this.Time),a=Object(c["a"])(e,2),r=a[0],n=a[1];if(t.startTime=r&&this.$root.formatTimeS(r),t.endTime=n&&this.$root.formatnightTimeS(n),t.userName&&t.userName.length<5)return this.$Tip.info({content:"会员账号最小5个字符！"}),!1;if(!t.startTime&&!t.endTime)return this.$Tip.info({content:"时间还未选择"}),!1;var o=t.startTime,s=t.endTime;for(var l in this.searchKey.startTime=o,this.searchKey.endTime=s,t.userName||delete t.isLike,t)t[l]||delete t[l];this.getData({params:t})}}},f=d,b=(a("2016"),a("2877")),y=Object(b["a"])(f,r,n,!1,null,"3f7a98dc",null);e["default"]=y.exports}}]);