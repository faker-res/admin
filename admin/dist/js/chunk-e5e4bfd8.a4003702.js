(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5e4bfd8"],{"134a":function(t,e,a){},"2ca4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("collapse",{attrs:{simple:"",value:"1"}},[a("panel",{attrs:{name:"1","hide-arrow":!0}},[a("div",{staticClass:"title",on:{click:function(e){t.open=!t.open}}},[t._v("返点设置\n      "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.open,expression:"!open"}],attrs:{type:"ios-arrow-down",size:"18",color:"#999"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],attrs:{type:"ios-arrow-forward",size:"18",color:"#999"}})],1),a("div",{staticClass:"section p15",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"btns"},t._l(t.lottMenu,function(e,n){return a("Button",{key:n,staticClass:"lottery mr20",class:t.showKey==e?"bd-bg":"bg-or",on:{click:function(a){return t.onselectLott(e,n)}}},[t._v(t._s(e))])}),1),a("div",{staticClass:"clearfix"},[t.$route.params.page?a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl clearfix h60"},[a("div",{staticClass:"label fl"},[t._v("统一设置：")]),a("Select",{staticClass:"fl",staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{"on-change":t.batchSetRebate},model:{value:t.batchRebate,callback:function(e){t.batchRebate=e},expression:"batchRebate"}},t._l(t.defaultOptions,function(e,n){return a("Option",{key:n,attrs:{value:e}},[t._v(t._s(e)+"%")])}),1)],1),a("div",{staticClass:"fl ml20 clearfix h60"},[a("div",{staticClass:"label fl"},[t._v("批量设置：")]),a("div",{staticClass:"fl"},[a("Button",{attrs:{icon:"ios-remove",size:"small"},on:{click:t.reduceRebate}}),a("Button",{staticClass:"ml20",attrs:{icon:"ios-add",size:"small"},on:{click:t.addRebate}})],1)])]):t._e(),t._l(t.lottSub[t.showKey],function(e){return a("div",{key:e.id,staticClass:"clearfix w25 h40 fl"},[a("div",{staticClass:"label fl"},[t._v(t._s(e.name)+"：")]),t.$route.params.page?a("div",{staticClass:"fl"},[a("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{"on-change":t.selectSingleRabate},model:{value:e.rebate,callback:function(a){t.$set(e,"rebate",a)},expression:"lott.rebate"}},t._l(e.options,function(e,n){return a("Option",{key:n,attrs:{value:e}},[t._v(t._s(e)+"%")])}),1),t.showParent?a("span",{staticClass:"tip"},[t._v("上限："+t._s((+e.parent_rebate).toFixed(2)||"-")+"%")]):t._e()],1):a("div",[t._v(t._s(e.rebate)+"%")])])})],2)])])],1)},r=[],s=a("f499"),o=a.n(s),i=(a("c5f6"),a("ac6a"),a("83ae")),c=a("c276"),l={components:{Icons:i["a"]},props:{data:{type:Array,required:!0,default:function(){return[]}},showParent:{type:Boolean,default:!1}},data:function(){return{open:!1,lottIndex:0,showKey:"六合彩",batchRebate:""}},computed:{defaultOptions:function(){for(var t=[],e=0;e<3;e++)for(var a=0;a<=10;a++){var n=.1*a;t[t.length]=(e+n).toFixed(2)}return t},lottMenu:function(){for(var t=[],e=0;e<this.data.length;e++)t[t.length]=this.data[e].className;return Object(c["n"])(t)},lottSub:function(){for(var t={},e=0;e<this.lottMenu.length;e++){var a=this.lottMenu[e];t[a]=[];for(var n=0;n<this.data.length;n++)if(this.data[n].className===this.lottMenu[e]){var r=t[a].length;this.data[n].options=this.createOptions(+this.data[n].parent_rebate||3),t[a][r]=this.data[n]}}for(var s in t)t[s].forEach(function(t){t.rebate=Number(t.rebate).toFixed(2)});return t}},methods:{batchSetRebate:function(t){t&&(this.lottSub[this.showKey].forEach(function(e){e.rebate=t}),this.createData())},selectSingleRabate:function(){this.createData()},onselectLott:function(t,e){this.lottIndex=e,this.showKey=t,this.batchRebate=""},reduceRebate:function(t){this.lottSub[this.showKey].forEach(function(t){var e=+t.rebate-.1;e=e<=0?0:e,t.rebate=e.toFixed(2)}),this.createData()},addRebate:function(){this.lottSub[this.showKey].forEach(function(t){var e=+t.rebate+.1;e=e>=+t.parent_rebate?+t.parent_rebate:e,t.rebate=e.toFixed(2)}),this.createData()},createOptions:function(t){for(var e=[],a=0;a<t;a++)for(var n=0;n<=10;n++){var r=.1*n;a+r<=t&&e.push((a+r).toFixed(2))}return e},createData:function(){var t={};return this.data.forEach(function(e){var a="CT_".concat(e.id,"_LOTTERY");t[a]=e.rebate}),this.$emit("on-rebate-change",o()(t)),o()(t)}}},u=l,d=(a("8c6e"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,"259de1b0",null),h=f.exports;e["a"]=h},"5c64":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("collapse",{attrs:{simple:"",value:"1"}},[a("panel",{attrs:{name:"1","hide-arrow":!0}},[a("div",{staticClass:"title",on:{click:function(e){t.open=!t.open}}},[t._v("\n      返水设置\n      "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.open,expression:"!open"}],attrs:{type:"ios-arrow-down",size:"18",color:"#999"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],attrs:{type:"ios-arrow-forward",size:"18",color:"#999"}})],1),a("div",{staticClass:"section p15",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"btns"},t._l(t._data_,function(e,n){return a("Button",{key:e.name,staticClass:"lottery mr20",class:t.showKey==n?"bd-bg":"bg-or",on:{click:function(e){return t.onselectMenu(n)}}},[t._v(t._s(e.name))])}),1),t._data_[t.showKey]?a("div",{staticClass:"clearfix info pt10"},t._l(t._data_[t.showKey].list,function(e){return a("div",{key:e.name_en,staticClass:"clearfix w20 h40 fl"},[a("div",{staticClass:"label fl"},[t._v(t._s(e.name_cn)+"：")]),t.$route.params.page?a("div",{staticClass:"fl"},[a("InputNumber",{staticClass:"w60xh36",attrs:{step:.1,max:e.parent_refund,min:0},on:{"on-change":t.onChange},model:{value:e.refund,callback:function(a){t.$set(e,"refund",a)},expression:"sub.refund"}}),t.showParent?a("span",{staticClass:"tip"},[a("span",{staticClass:"mr5"},[t._v("上限")]),t._v("\n              "+t._s(e.parent_refund.toFixed(2)||"-")+"\n            ")]):t._e()],1):a("div",[t._v(t._s(e.refund))])])}),0):t._e()])])],1)},r=[],s=a("f499"),o=a.n(s),i=(a("ac6a"),a("cebc")),c=a("83ae"),l=(a("c276"),{components:{Icons:c["a"]},props:{data:{type:[Object,Array],required:!0,default:function(){}},showParent:{type:Boolean,required:!1,default:!1}},data:function(){return{open:!1,showKey:"live"}},computed:{_data_:function(){var t=Object(i["a"])({},this.data);for(var e in t)t[e].list.forEach(function(t){t.refund=+t.refund,t.parent_refund=+t.parent_refund});return t}},methods:{onselectMenu:function(t){this.showKey=t},onChange:function(t){this.createData()},createData:function(){var t={};for(var e in this._data_)this._data_[e].list.forEach(function(e){t[e.name_en]=e.refund});return this.$emit("on-refund-change",o()(t)),o()(t)}}}),u=l,d=(a("6e9d"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,"deef8c56",null),h=f.exports;e["a"]=h},"6e9d":function(t,e,a){"use strict";var n=a("134a"),r=a.n(n);r.a},"8afc":function(t,e,a){},"8c6e":function(t,e,a){"use strict";var n=a("fac7"),r=a.n(n);r.a},"9f33":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["single"==t.$route.query.stage?a("div",[a("Form",{ref:"singleForm",attrs:{"label-width":90,model:t.singleForm,rules:t.singleFormRules}},[a("FormItem",{attrs:{label:"域名类型"}},[a("Input",{staticClass:"w260x",attrs:{value:"代理域名",disabled:""}})],1),a("FormItem",{attrs:{label:"账户名称"}},[a("AutoSearch",{attrs:{placeholder:"请输入账户名称，可搜索",clearable:!1},on:{changeShow:t.changeShow,sendSuperior:t.getSuperior}})],1),a("FormItem",{attrs:{label:"域名",prop:"domain"}},[a("Input",{staticClass:"w260x",attrs:{placeholder:"请输入域名，不加http,如www.a.com"},model:{value:t.singleForm.domain,callback:function(e){t.$set(t.singleForm,"domain",e)},expression:"singleForm.domain"}})],1),a("FormItem",{attrs:{label:"状态"}},[a("Select",{staticClass:"w260x",model:{value:t.singleForm.status,callback:function(e){t.$set(t.singleForm,"status",e)},expression:"singleForm.status"}},[a("Option",{attrs:{value:"yes"}},[t._v("开启")]),a("Option",{attrs:{value:"no"}},[t._v("关闭")])],1)],1),t.rebateShow?a("div",[a("rebateSelect",{ref:"rebateSelect",attrs:{data:t.rebate},on:{"on-rebate-change":t.onRebateChange}}),a("refundSelect",{ref:"refundSelect",attrs:{data:t.refund},on:{"on-refund-change":t.onRefundChange}})],1):t._e(),a("FormItem",[a("Button",{staticClass:"ivu-btn submit bg mt15",attrs:{type:"primary"},on:{click:function(e){return t.submit("single")}}},[t._v("确认添加")])],1)],1)],1):a("div",[a("Form",{ref:"batchForm",attrs:{"label-width":120,model:t.batchForm,rules:t.batchFormRules}},[a("FormItem",{attrs:{label:"域名类型"}},[a("Input",{staticClass:"w260x",attrs:{value:"大股东域名",disabled:""}})],1),a("FormItem",{attrs:{label:"大股东账号",prop:"uname"}},[a("Select",{staticClass:"w260x",attrs:{placeholdeer:"请选择大股东账号"},model:{value:t.batchForm.uname,callback:function(e){t.$set(t.batchForm,"uname",e)},expression:"batchForm.uname"}},t._l(t.batchList,function(e,n){return a("Option",{key:n,attrs:{value:e.userName}},[t._v(t._s(e.userName))])}),1)],1),a("FormItem",{attrs:{label:"域名名称",prop:"urlstr"}},[a("Input",{staticClass:"w260x",attrs:{type:"textarea",rows:4,placeholder:"可批量添加，用英文;分开,单个添加请带上英文;，如www.x.com;www.y.com"},model:{value:t.batchForm.urlstr,callback:function(e){t.$set(t.batchForm,"urlstr",e)},expression:"batchForm.urlstr"}})],1),a("FormItem",[a("Button",{staticClass:"ivu-btn submit bg mt15",attrs:{type:"primary",loading:t.$root.editBtnLoading},on:{click:function(e){return t.submit("batch")}}},[t._v("确认添加")])],1)],1)],1)])},r=[],s=a("cebc"),o=(a("7f7f"),a("ac6a"),a("2ca4")),i=a("5c64"),c=a("ded5"),l=a("f28b"),u={name:"addDomain",components:{rebateSelect:o["a"],refundSelect:i["a"],AutoSearch:c["a"]},data:function(){return{batchList:[],singleForm:{status:"yes",uname:""},singleFormRules:{domain:[{required:!0,message:"请输入域名",trigger:"blur"}]},batchForm:{},batchFormRules:{uname:[{required:!0,message:"请输入大股东账号",trigger:"blur"}],urlstr:[{required:!0,message:"请输入域名",trigger:"blur"},{message:"请输入正确的域名格式",pattern:/^(([a-zA-Z\d][a-zA-Z\d-_]{1,15}\.)+([a-zA-Z\d-_][^ ]{1,5}\;))*$/,trigger:"blur"}]},rebateShow:!1,rebate:[],refund:{}}},mounted:function(){var t=this;if("single"!=this.$route.query.stage){var e={type:"shareholder",content:this.$root.nowSite.id,siteId:this.$root.nowSite.id};Object(l["i"])(e).then(function(e){t.batchList=e.data})}},methods:{changeShow:function(t){this.rebateShow=t},getSuperior:function(t){this.singleForm.uname=t,this.rebateShow=!0;var e={uname:t,siteId:this.$root.nowSite.id};this.getRebateSetting(e)},getRebateSetting:function(t){var e=this;Object(l["k"])(t).then(function(t){var a=t.data,n=a.rebate,r=a.platform;for(var s in n.forEach(function(t){t.parent_rebate=t.rebate}),e.rebate=n,r)r[s].list.forEach(function(t){t.parent_refund=t.value,t.name_cn=t.name,t.name_en=t.key,t.refund=t.value});e.refund=r,e.rebateShow=!0})},onRebateChange:function(t){this.singleForm.rebate=t},onRefundChange:function(t){this.singleForm.platform=t},submit:function(t){var e=this;"single"==t?this.$refs.singleForm.validate(function(t){if(t){if(!e.singleForm.uname)return e.$Tip.info({content:"请输入账户名称"}),!1;e.singleForm.rebate||(e.singleForm.rebate=e.$refs.rebateSelect.createData()),e.singleForm.platform||(e.singleForm.platform=e.$refs.refundSelect.createData());var a=Object(s["a"])({},e.singleForm,{siteId:e.$root.nowSite.id});Object(l["b"])(a).then(function(t){200==t.code&&e.goAgencyDomain()})}}):this.$refs.batchForm.validate(function(t){if(t){var a=Object(s["a"])({},e.batchForm,{siteId:e.$root.nowSite.id});Object(l["c"])(a).then(function(t){200==t.code&&e.goAgencyDomain()})}})},goAgencyDomain:function(){this.$router.push({name:"agencyDomain"})}}},d=u,f=(a("e193"),a("2877")),h=Object(f["a"])(d,n,r,!1,null,"4585cdbb",null);e["default"]=h.exports},e193:function(t,e,a){"use strict";var n=a("8afc"),r=a.n(n);r.a},fac7:function(t,e,a){}}]);