(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b2d1179"],{8593:function(t,e,r){"use strict";r.d(e,"mb",function(){return a}),r.d(e,"rb",function(){return u}),r.d(e,"C",function(){return i}),r.d(e,"k",function(){return s}),r.d(e,"Ab",function(){return o}),r.d(e,"hb",function(){return c}),r.d(e,"I",function(){return d}),r.d(e,"J",function(){return l}),r.d(e,"db",function(){return m}),r.d(e,"gb",function(){return f}),r.d(e,"eb",function(){return h}),r.d(e,"fb",function(){return p}),r.d(e,"l",function(){return v}),r.d(e,"H",function(){return b}),r.d(e,"lb",function(){return q}),r.d(e,"nb",function(){return g}),r.d(e,"jb",function(){return k}),r.d(e,"kb",function(){return y}),r.d(e,"tb",function(){return $}),r.d(e,"wb",function(){return C}),r.d(e,"sb",function(){return w}),r.d(e,"ub",function(){return x}),r.d(e,"vb",function(){return L}),r.d(e,"xb",function(){return I}),r.d(e,"x",function(){return D}),r.d(e,"y",function(){return E}),r.d(e,"z",function(){return _}),r.d(e,"K",function(){return K}),r.d(e,"qb",function(){return F}),r.d(e,"D",function(){return U}),r.d(e,"ob",function(){return S}),r.d(e,"pb",function(){return M}),r.d(e,"L",function(){return P}),r.d(e,"ib",function(){return R}),r.d(e,"U",function(){return j}),r.d(e,"V",function(){return N}),r.d(e,"S",function(){return A}),r.d(e,"T",function(){return O}),r.d(e,"W",function(){return B}),r.d(e,"ab",function(){return G}),r.d(e,"Y",function(){return T}),r.d(e,"X",function(){return z}),r.d(e,"bb",function(){return J}),r.d(e,"Z",function(){return W}),r.d(e,"cb",function(){return H}),r.d(e,"P",function(){return Q}),r.d(e,"N",function(){return V}),r.d(e,"M",function(){return X}),r.d(e,"Q",function(){return Y}),r.d(e,"O",function(){return Z}),r.d(e,"R",function(){return tt}),r.d(e,"u",function(){return et}),r.d(e,"s",function(){return rt}),r.d(e,"r",function(){return nt}),r.d(e,"v",function(){return at}),r.d(e,"t",function(){return ut}),r.d(e,"w",function(){return it}),r.d(e,"p",function(){return st}),r.d(e,"A",function(){return ot}),r.d(e,"n",function(){return ct}),r.d(e,"o",function(){return dt}),r.d(e,"B",function(){return lt}),r.d(e,"m",function(){return mt}),r.d(e,"q",function(){return ft}),r.d(e,"i",function(){return ht}),r.d(e,"h",function(){return pt}),r.d(e,"j",function(){return vt}),r.d(e,"f",function(){return bt}),r.d(e,"g",function(){return qt}),r.d(e,"e",function(){return gt}),r.d(e,"a",function(){return kt}),r.d(e,"d",function(){return yt}),r.d(e,"c",function(){return $t}),r.d(e,"b",function(){return Ct}),r.d(e,"zb",function(){return wt}),r.d(e,"yb",function(){return xt}),r.d(e,"F",function(){return Lt}),r.d(e,"E",function(){return It}),r.d(e,"G",function(){return Dt});var n=r("66df"),a=function(t){var e=t.params,r=t.query,a={url:"siteManagementList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},u=function(t){var e={url:"/menuSort",method:"post",data:t};return n["a"].request(e)},i=function(t){var e={url:"/menuDel",method:"post",data:t};return n["a"].request(e)},s=function(t){var e={url:"/menuAdd",method:"post",data:t};return n["a"].request(e)},o=function(t){var e={url:"/menuUpdate",method:"post",data:t};return n["a"].request(e)},c=function(t){var e={url:"/permissionSearchUri",method:"post",data:t};return n["a"].request(e)},d=function(t){var e={url:"/permissionList",method:"get",data:t};return n["a"].request(e)},l=function(){var t={url:"/roleList",method:"get"};return n["a"].request(t)},m=function(t){var e={url:"/roleAdd",method:"post",data:t};return n["a"].request(e)},f=function(t){var e={url:"/roleUpdate",method:"post",data:t};return n["a"].request(e)},h=function(t){var e={url:"/roleDel",method:"post",data:t};return n["a"].request(e)},p=function(t){var e={url:"/roleDetail",method:"post",data:t};return n["a"].request(e)},v=function(t){var e={url:"/adminModifyStatus",method:"get",params:t};return n["a"].request(e)},b=function(t){var e=t.params,r=t.query,a={url:"/adminLogList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},q=function(t){var e={url:"siteManagementDetail",method:"get",params:t};return n["a"].request(e)},g=function(t){var e={url:"siteManagementUpdate",method:"post",data:t};return n["a"].request(e)},k=function(t){var e={url:"siteManagementCreate",method:"post",data:t};return n["a"].request(e)},y=function(){var t={url:"siteManagementDbId",method:"get"};return n["a"].request(t)},$=function(t){var e=t.params,r=t.query,a={url:"systemMemberLevelList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},C=function(t){var e=t.params,r=t.query,a={url:"systemMemberRefundLevelList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},w=function(t){var e={url:"systemMemberLevelAdd",method:"post",data:t};return n["a"].request(e)},x=function(t){var e={url:"systemMemberLevelUp",method:"post",data:t};return n["a"].request(e)},L=function(t){var e={url:"systemMemberRefundLevelAdd",method:"post",data:t};return n["a"].request(e)},I=function(t){var e={url:"systemMemberRefundLevelUp",method:"post",data:t};return n["a"].request(e)},D=function(t){var e={url:"blackList",method:"get",params:t};return n["a"].request(e)},E=function(t){var e={url:"blackListCreate",method:"post",data:t};return n["a"].request(e)},_=function(t){var e={url:"blackListDelete",method:"get",params:t};return n["a"].request(e)},K=function(t){var e={url:"/slideList",method:"get",params:t};return n["a"].request(e)},F=function(t){var e={url:"slideIns",method:"post",data:t};return n["a"].request(e)},U=function(t){var e={url:"/slideDel",method:"get",params:t};return n["a"].request(e)},S=function(t){var e={url:"/slideImgInfo",method:"get",params:t};return n["a"].request(e)},M=function(t){var e={url:"slideImgInfoUpt",method:"post",data:t};return n["a"].request(e)},P=function(t){var e=t.params,r=t.query,a={url:"inBox",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},R=function(t){var e=t.params,r=t.query,a={url:"outBox",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},j=function(t){var e={url:"letterReply",method:"post",data:t};return n["a"].request(e)},N=function(t){var e={url:"letterSend",method:"post",data:t};return n["a"].request(e)},A=function(t){var e={url:"letterDel",method:"post",data:t};return n["a"].request(e)},O=function(t){var e={url:"/letterDetail",method:"get",params:t};return n["a"].request(e)},B=function(t){var e={url:"/letterUptRead",method:"get",params:t};return n["a"].request(e)},G=function(t){var e=t.params,r=t.query,a={url:"popupsList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},T=function(t){var e={url:"popupsDetail",method:"get",params:t};return n["a"].request(e)},z=function(t){var e={url:"/popupsDel",method:"get",params:t};return n["a"].request(e)},J=function(t){var e={url:"popupsStatusChange",method:"post",data:t};return n["a"].request(e)},W=function(t){var e={url:"popupsIns",method:"post",data:t};return n["a"].request(e)},H=function(t){var e={url:"popupsUpt",method:"post",data:t};return n["a"].request(e)},Q=function(t){var e=t.params,r=t.query,a={url:"lanternList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},V=function(t){var e={url:"lanternDetail",method:"get",params:t};return n["a"].request(e)},X=function(t){var e={url:"/lanternDel",method:"get",params:t};return n["a"].request(e)},Y=function(t){var e={url:"lanternStatusChange",method:"post",data:t};return n["a"].request(e)},Z=function(t){var e={url:"lanternIns",method:"post",data:t};return n["a"].request(e)},tt=function(t){var e={url:"lanternUpt",method:"post",data:t};return n["a"].request(e)},et=function(t){var e=t.params,r=t.query,a={url:"articleList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},rt=function(t){var e={url:"articleDetail",method:"get",params:t};return n["a"].request(e)},nt=function(t){var e={url:"/articleDel",method:"get",params:t};return n["a"].request(e)},at=function(t){var e={url:"articleStatusChange",method:"post",data:t};return n["a"].request(e)},ut=function(t){var e={url:"articleIns",method:"post",data:t};return n["a"].request(e)},it=function(t){var e={url:"articleUpt",method:"post",data:t};return n["a"].request(e)},st=function(t){var e=t.params,r=t.query,a={url:"adminNewList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},ot=function(t){var e={url:"changePassWord",method:"post",data:t};return n["a"].request(e)},ct=function(t){var e={url:"adminNewDelete",method:"post",data:t};return n["a"].request(e)},dt=function(t){var e={url:"adminNewDetail",method:"post",data:t};return n["a"].request(e)},lt=function(t){var e={url:"copyAdmin",method:"post",data:t};return n["a"].request(e)},mt=function(t){var e={url:"adminNewAdd",method:"post",data:t};return n["a"].request(e)},ft=function(t){var e={url:"adminNewUpdate",method:"post",data:t};return n["a"].request(e)},ht=function(t){var e=t.params,r=t.query,a={url:"activityList",method:"post",data:e};return r&&(a.params=r),n["a"].request(a)},pt=function(t){var e={url:"activityIns",method:"post",data:t};return n["a"].request(e)},vt=function(t){var e={url:"activityUpt",method:"post",data:t};return n["a"].request(e)},bt=function(t){var e={url:"/activityDel",method:"get",params:t};return n["a"].request(e)},qt=function(t){var e={url:"/activityDetail",method:"get",params:t};return n["a"].request(e)},gt=function(t){var e={url:"activityChangeStatus",method:"post",data:t};return n["a"].request(e)},kt=function(t){var e={url:"/activityBySort",method:"get",params:t};return n["a"].request(e)},yt=function(t){var e={url:"/activityCateList",method:"get",params:t};return n["a"].request(e)},$t=function(t){var e={url:"activityCateIns",method:"post",data:t};return n["a"].request(e)},Ct=function(t){var e={url:"/activityCateDel",method:"get",params:t};return n["a"].request(e)},wt=function(t){var e={url:"systemSiteGameUp",method:"post",data:t};return n["a"].request(e)},xt=function(t){var e={url:"systemSiteGameList",method:"post",data:t};return n["a"].request(e)},Lt=function(t){var e={url:"gameConfigList",method:"post",data:t};return n["a"].request(e)},It=function(t){var e={url:"/gameConfigClassification",method:"get",params:t};return n["a"].request(e)},Dt=function(t){var e={url:"/gameConfigUpGameStatus",method:"post",data:t};return n["a"].request(e)}},"8d7e":function(t,e,r){},f2dc:function(t,e,r){"use strict";var n=r("8d7e"),a=r.n(n);a.a},f474:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"v2-edit"},[r("div",{staticClass:"section"},[r("Form",{ref:"Form",attrs:{inline:"","label-width":100,model:t.formKey,rules:t.rules}},[r("FormItem",{attrs:{label:"角色标志",prop:"name"}},[r("Input",{staticClass:"s-150",attrs:{placeholder:"请输入角色标志"},model:{value:t.formKey.name,callback:function(e){t.$set(t.formKey,"name",e)},expression:"formKey.name"}})],1),r("FormItem",{attrs:{label:"角色名称",prop:"title"}},[r("Input",{staticClass:"s-160",attrs:{placeholder:"请输入角色名称"},model:{value:t.formKey.title,callback:function(e){t.$set(t.formKey,"title",e)},expression:"formKey.title"}})],1),r("FormItem",{attrs:{label:"角色描述",prop:"description"}},[r("Input",{staticClass:"s-450",model:{value:t.formKey.description,callback:function(e){t.$set(t.formKey,"description",e)},expression:"formKey.description"}})],1)],1)],1),r("div",[r("div",{staticClass:"pb10 pl30"},[t._v("角色赋权")]),r("Tabs",{attrs:{type:"card",animated:!1,value:"会员管理"}},t._l(t.permissionsList,function(e){return r("TabPane",{key:e.id,attrs:{label:e.name,name:e.name}},[r("table",{staticClass:"ivu-table ivu-table-border bl bt",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tr",[r("th",{staticClass:"ivu-table-column-center w60x no-bb"},[r("Checkbox",{attrs:{indeterminate:e.indeterminate},on:{"on-change":function(r){return t.checkGrandPaFun(e,r)}},model:{value:e.checked,callback:function(r){t.$set(e,"checked",r)},expression:"grand.checked"}})],1),r("th",{staticClass:"ivu-table-column-center no-bb"},[t._v("权限名称")]),r("th",{staticClass:"ivu-table-column-center w60x no-bb"},[t._v("...")])])]),t._l(e.children,function(n){return r("table",{key:n.id,staticClass:"ivu-table ivu-table-border bl",class:{bb:n.expand},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("tr",[r("td",{staticClass:"ivu-table-column-center w60x"},[r("Checkbox",{attrs:{indeterminate:n.indeterminate},on:{"on-change":function(r){return t.checkParentFun(e,n,r)}},model:{value:n.checked,callback:function(e){t.$set(n,"checked",e)},expression:"parent.checked"}})],1),r("td",{staticClass:"ivu-table-column-center"},[t._v(t._s(n.name))]),r("td",{staticClass:"ivu-table-column-center w60x",on:{click:function(e){return t.onExpand(n)}}},[r("Icon",{directives:[{name:"show",rawName:"v-show",value:!n.expand,expression:"!parent.expand"}],attrs:{type:"ios-arrow-forward",size:"14",color:"#666666"}}),r("Icon",{directives:[{name:"show",rawName:"v-show",value:n.expand,expression:"parent.expand"}],attrs:{type:"ios-arrow-down",size:"14",color:"#666666"}})],1)]),r("tr",{directives:[{name:"show",rawName:"v-show",value:n.expand,expression:"parent.expand"}],staticClass:"bb"},[r("td",{staticClass:"hidden"}),r("td",{staticClass:"no-br no-bb pb10"},t._l(n.children,function(a){return r("Checkbox",{key:a.id,staticClass:"w18 mt10",attrs:{indeterminate:a.indeterminate},on:{"on-change":function(r){return t.checkChildFun(e,n,a,r)}},model:{value:a.checked,callback:function(e){t.$set(a,"checked",e)},expression:"child.checked"}},[t._v(t._s(a.name))])}),1),r("td",{staticClass:"hidden"})])])})],2)}),1),r("div",{staticClass:"center mt20"},[r("Button",{staticClass:"more-btn ml40 ivu-btn export-ok",staticStyle:{width:"140px"},attrs:{type:"primary",loading:t.$root.editBtnLoading},on:{click:t.submit}},[t._v("确认保存")])],1)],1)])},a=[],u=(r("6762"),r("96cf"),r("3b8d")),i=r("cebc"),s=(r("ac6a"),r("8593")),o=r("83ae"),c={components:{Icons:o["a"]},data:function(){return{permissionsList:[],formKey:{id:"",name:"",title:"",description:"",permissionId:[]},rules:{name:[{required:!0,message:"请输入角色标志",trigger:"blur"}],title:[{required:!0,message:"请输入角色名称",trigger:"blur"}],description:[{required:!0,message:"请输入角色描述",trigger:"blur"}]}}},created:function(){var t=this;this.getRuleList().then(function(e){if("edit"===t.$route.params.page){var r=t.$route.query.id;t.renderEdit(r)}})},methods:{renderEdit:function(t){var e=this;Object(s["fb"])({id:t}).then(function(t){var r=t.data.permissions;for(var n in e.formKey)e.formKey[n]=t.data[n];e.formKey.permissionId=r,e.permissionsList.forEach(function(t){var n=0;t.children.forEach(function(t){var a=0;r.forEach(function(r){t.permission_id==r.id&&(n++,e.$set(t,"checked",!0)),t.children&&t.children.forEach(function(t){t.permission_id==r.id&&(a++,e.$set(t,"checked",!0))})}),t.children.length&&(a>0?a===t.children.length?(e.$set(t,"checked",!0),e.$set(t,"indeterminate",!1)):(e.$set(t,"checked",!1),e.$set(t,"indeterminate",!0)):(e.$set(t,"checked",!1),e.$set(t,"indeterminate",!1)))}),n>0?n===t.children.length?(e.$set(t,"checked",!0),e.$set(t,"indeterminate",!1)):(e.$set(t,"checked",!1),e.$set(t,"indeterminate",!0)):(e.$set(t,"checked",!1),e.$set(t,"indeterminate",!1))})})},onExpand:function(t){this.$set(t,"expand",!t.expand)},submit:function(){var t=this,e=Object(i["a"])({},this.formKey);this.$root.startEditLoading(),this.$refs.Form.validate(function(r){r?("create"===t.$route.params.page&&(Object(s["db"])(e).then(function(e){t.$Tip.success({content:"角色添加成功！"})}),t.$router.push({name:"role"})),"edit"===t.$route.params.page&&Object(s["gb"])(e).then(function(e){200==e.code&&(t.$Tip.success({content:"角色编辑成功！"}),t.$router.push({name:"role"}))})):t.$root.endEditLoading()})},getRuleList:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["I"])().then(function(t){r.permissionsList=t.data});case 2:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}(),watchChildChangeFun:function(t){var e=0;t.children.forEach(function(t){t.checked&&e++}),e>0?e===t.children.length?(this.$set(t,"checked",!0),this.$set(t,"indeterminate",!1)):(this.$set(t,"checked",!1),this.$set(t,"indeterminate",!0)):(this.$set(t,"checked",!1),this.$set(t,"indeterminate",!1))},checkChildFun:function(t,e,r,n){var a=0;this.$set(t,"indeterminate",!1),this.$set(r,"checked",n),e.children.forEach(function(t){t.checked&&a++}),a>0?a===e.children.length?(this.$set(e,"checked",!0),this.$set(e,"indeterminate",!1)):(this.$set(e,"checked",!1),this.$set(e,"indeterminate",!0)):(this.$set(e,"checked",!1),this.$set(e,"indeterminate",!1)),this.watchChildChangeFun(t),this.createPermissionId()},checkParentFun:function(t,e,r){var n=this;this.$set(t,"indeterminate",r),this.$set(e,"checked",r),this.$set(e,"indeterminate",!1),e.children.forEach(function(t){n.$set(t,"checked",r)}),this.watchChildChangeFun(t),this.createPermissionId()},checkGrandPaFun:function(t,e){var r=this;this.$set(t,"checked",e),this.$set(t,"indeterminate",!1),t.children.forEach(function(t){r.$set(t,"indeterminate",!1),r.$set(t,"checked",e),t.children&&t.children.forEach(function(t){r.$set(t,"checked",e)})}),this.createPermissionId()},createPermissionId:function(){var t=[];this.permissionsList.forEach(function(e){e.children.forEach(function(e){e.checked&&t.push(e.permission_id),e.children&&e.children.forEach(function(r){r.checked&&(t.push(e.permission_id),t.push(r.permission_id))})})});var e=[];t.forEach(function(t){e.includes(t)||e.push(t)}),this.formKey.permissionId=e}}},d=c,l=(r("f2dc"),r("2877")),m=Object(l["a"])(d,n,a,!1,null,"241eca01",null);e["default"]=m.exports}}]);