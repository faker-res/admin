(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-008b175a"],{"233e":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"v2-search"},[s("Form",{ref:"searchKey",attrs:{model:e.searchKey,rules:e.rules}},[s("div",{staticClass:"mb20"},[s("FormItem",{attrs:{label:"文章标题",prop:"title"}},[s("Select",{staticClass:"w190x ml10",attrs:{clearable:""},on:{"on-change":e.changeType},model:{value:e.searchKey.title,callback:function(t){e.$set(e.searchKey,"title",t)},expression:"searchKey.title"}},e._l(e.artcilesList,function(t,i){return s("Option",{key:i,attrs:{value:t.name}},[e._v(e._s(t.name))])}),1)],1)],1),s("div",{staticClass:"mb20"},[e.seltext?s("FormItem",{attrs:{label:"自定义标题",prop:"newtitle"}},[s("Input",{model:{value:e.searchKey.newtitle,callback:function(t){e.$set(e.searchKey,"newtitle",t)},expression:"searchKey.newtitle"}})],1):e._e()],1),s("div",{staticClass:"mb20"},[e.seltext?s("FormItem",{attrs:{label:"自定义地址",prop:"custom_url"}},[s("Input",{model:{value:e.searchKey.custom_url,callback:function(t){e.$set(e.searchKey,"custom_url",t)},expression:"searchKey.custom_url"}})],1):e._e()],1),s("div",{staticClass:"mb20"},[s("FormItem",{attrs:{label:"发布平台",prop:"newclient_type"}},[s("CheckboxGroup",{staticClass:"ml5",on:{"on-change":e.changeplatform},model:{value:e.searchKey.newclient_type,callback:function(t){e.$set(e.searchKey,"newclient_type",t)},expression:"searchKey.newclient_type"}},[s("Checkbox",{attrs:{label:"PC"}}),s("Checkbox",{attrs:{label:"H5"}}),s("Checkbox",{attrs:{label:"Android"}}),s("Checkbox",{attrs:{label:"IOS"}})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showPC,expression:"showPC"}],staticClass:"clearfix"},[s("div",[e._v("PC")]),s("UE",{ref:"ue1",attrs:{defaultMsg:e.defaultMsg1,config:e.config,id:e.ue1}})],1),e.showh5?s("div",{staticClass:"clearfix mt30"},[s("div",[e._v("手机端")]),s("UE",{ref:"ue2",attrs:{defaultMsg:e.defaultMsg2,config:e.config,id:e.ue2}})],1):e._e(),s("div",{staticClass:"mt20"},[s("FormItem",{attrs:{label:"状态"}},[s("i-switch",{staticClass:"ml30",attrs:{size:"large"},model:{value:e.searchKey.status,callback:function(t){e.$set(e.searchKey,"status",t)},expression:"searchKey.status"}}),s("span",{staticClass:"ml20"},[e._v(e._s(0==e.searchKey.status?"未启用":"已启用"))]),s("Button",{staticClass:"ivu-btn addSave ml40",on:{click:e.save}},[e._v(e._s("edit"===e.$route.params.page?"确认保存":"确认新增"))])],1)],1)])],1)])},n=[],a=(s("28a5"),s("a4bb")),r=s.n(a),o=(s("6762"),s("2fdb"),s("cebc")),c=(s("ac6a"),s("6b54"),s("a0f0")),l=s("e945"),u=s("8593"),h={name:"addArtciles",components:{Editor:c["a"],UE:l["a"]},data:function(){return{rules:{title:[{required:!0,message:"请输入标题",trigger:"change"}],custom_url:[{required:!0,message:"请输入自定义地址",trigger:"blur"}],newtitle:[{required:!0,message:"请输入自定义标题",trigger:"blur",pattern:/.+/}],newclient_type:[{required:!0,message:"请选择客户端",trigger:"change",pattern:/.+/}]},defaultMsg1:"",defaultMsg2:"8888888888888",config:{initialFrameWidth:900,initialFrameHeight:350},ue1:"ue1",ue2:"ue2",seltext:!1,otherList:!1,showh5:!1,showPC:!0,searchKey:{siteId:"",siteName:"",type:"article",title:"",client_type:"PC",newclient_type:["PC"],description:"",status:"",desc_mobile:"",custom_url:"",newtitle:""},artcilesList:[{value:"0",name:"自定义"},{value:"1",name:"关于我们"},{value:"2",name:"公司简介"},{value:"3",name:"联系我们"},{value:"4",name:"新手指南"},{value:"5",name:"合作加盟"},{value:"6",name:"优惠活动"},{value:"7",name:"合作伙伴"},{value:"8",name:"存款帮助"},{value:"9",name:"取款帮助"},{value:"9",name:"常见问题"}],fruit:[],contentpc:"",contentphone:""}},created:function(){if("edit"===this.$route.params.page){var e={id:this.$route.query.id,siteId:this.$root.nowSite.id};this.searchKey.newclient_type=[],this.searchKey.client_type="",this.onDetails(e)}},mounted:function(){if("edit"===this.$route.params.page){var e={id:this.$route.query.id,siteId:this.$root.nowSite.id};this.searchKey.newclient_type=[],this.searchKey.client_type="",this.onDetails(e)}},methods:{handleChangepc:function(e,t){this.searchKey.description=e.toString()},handleChangephone:function(e,t){this.searchKey.desc_mobile=e.toString()},changeContent:function(){this.$refs.editor.setHtml("<p>powered by wangeditor</p>")},changeplatform:function(){var e=[];this.showPC=this.searchKey.newclient_type.some(function(e){return"PC"==e}),this.showh5=this.searchKey.newclient_type.some(function(e){return"H5"==e||"Android"==e||"IOS"==e}),this.searchKey.newclient_type.forEach(function(t){e.push(t)}),e.length>1?this.searchKey.client_type=e.join(","):this.searchKey.client_type=e[0]},changeType:function(){"自定义"==this.searchKey.title?this.seltext=!0:this.seltext=!1},save:function(){var e=this;this.$refs.searchKey.validate(function(t){if(t){if("create"===e.$route.params.page){e.showPC&&!e.showh5&&(e.searchKey.description=e.$refs.ue1.getUEContent()),e.showh5&&!e.showPC&&(e.searchKey.desc_mobile=e.$refs.ue2.getUEContent()),e.showh5&&e.showPC&&(e.searchKey.description=e.$refs.ue1.getUEContent(),e.searchKey.desc_mobile=e.$refs.ue2.getUEContent()),console.log(e.searchKey);var s=Object(o["a"])({},e.searchKey);if(s.siteId=e.$root.nowSite.id,s.siteName=e.$root.nowSite.siteName,1==s.status?s.status="yes":s.status="no","自定义"==s.title?s.title=s.newtitle:delete s.custom_url,"PC"==s.client_type&&(delete s.desc_mobile,s.description=e.$refs.ue1.getUEContent(),!s.description))return e.$Message.error("请填写PC端文章内容！"),!1;if(s.client_type.includes(",")&&(console.log(666),s.desc_mobile=e.$refs.ue2.getUEContent(),!s.desc_mobile))return e.$Message.error("请填写手机端文章内容！"),!1;for(var i in delete s.newtitle,delete s.newclient_type,s)s[i]||delete s[i];Object(u["t"])(s).then(function(t){e.$router.go(-1)})}if("edit"===e.$route.params.page){e.showPC&&!e.showh5&&(e.searchKey.description=e.$refs.ue1.getUEContent()),e.showh5&&!e.showPC&&(e.searchKey.desc_mobile=e.$refs.ue2.getUEContent()),e.showh5&&e.showPC&&(e.searchKey.description=e.$refs.ue1.getUEContent(),e.searchKey.desc_mobile=e.$refs.ue2.getUEContent());var n=Object(o["a"])({},e.searchKey);if(n.siteId=e.$root.nowSite.id,n.id=e.$route.query.id,n.siteName=e.$root.nowSite.siteName,1==n.status?n.status="yes":n.status="no","自定义"==n.title?n.title=n.newtitle:delete n.custom_url,"PC"==n.client_type&&(delete n.desc_mobile,!n.description))return e.$Message.error("请填写PC端文章内容！"),!1;if(n.client_type.includes(",")&&!n.desc_mobile)return e.$Message.error("请填写手机端文章内容！"),!1;delete n.newtitle,delete n.newclient_type,Object(u["w"])(n).then(function(t){e.$router.go(-1)})}}else e.$Message.error("请填写正确的信息！")})},onDetails:function(e){var t=this;Object(u["s"])(e).then(function(e){r()(t.searchKey).forEach(function(s){t.searchKey[s]="status"==s?"yes"==e.data[s]:"newclient_type"==s||"newtitle"==s?t.searchKey[s]:e.data[s]});var s=t.searchKey,i=s.newclient_type,n=s.client_type,a=(s.title,s.newtitle,s.custom_url),o=s.description,c=s.desc_mobile;1==n.length?i.push(n):n.split(",").map(function(e){i.push(e)}),t.showh5=i.some(function(e){return"H5"==e||"Android"==e||"IOS"==e}),t.$refs.ue1._data.editor.body.innerHTML=o,t.defaultMsg2=c,console.log(t.defaultMsg1,t.defaultMsg2),a&&(t.seltext=!0,t.searchKey.newtitle=t.searchKey.title,t.searchKey.title="自定义")})}}},d=h,p=(s("3751"),s("2877")),m=Object(p["a"])(d,i,n,!1,null,"323b53e2",null);t["default"]=m.exports},3751:function(e,t,s){"use strict";var i=s("638a"),n=s.n(i);n.a},"638a":function(e,t,s){},e945:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("script",{ref:"editor",attrs:{id:e.id,type:"text/plain"}})])},n=[],a={name:"UE",data:function(){return{editor:null}},props:{defaultMsg:{type:String},config:{type:Object},id:{type:String}},mounted:function(){var e=this;this.editor=window.UE.getEditor(this.id,this.config),this.editor.addListener("ready",function(){e.editor.setContent(e.defaultMsg)})},methods:{getUEContent:function(){return this.editor.getContent()},getUEContentTxt:function(){return this.editor.getContentTxt()}},destroyed:function(){this.editor.destroy()}},r=a,o=s("2877"),c=Object(o["a"])(r,i,n,!1,null,null,null),l=c.exports;t["a"]=l}}]);