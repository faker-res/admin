(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d134b74"],{"0a0d":function(t,e,a){t.exports=a("e829")},"2f37":function(t,e,a){var i=a("63b6");i(i.S,"Date",{now:function(){return(new Date).getTime()}})},"8b3d":function(t,e,a){"use strict";var i=a("ec2d"),s=a.n(i);s.a},e829:function(t,e,a){a("2f37"),t.exports=a("584a").Date.now},ec2d:function(t,e,a){},ee6b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formKey",attrs:{model:t.formKey,rules:t.rules}},[a("div",{staticClass:"mb20"},[a("FormItem",{attrs:{label:"信息标题",prop:"title"}},[a("Input",{staticClass:"w609x ml5",attrs:{placeholder:"请输入标题(20字以内)"},model:{value:t.formKey.title,callback:function(e){t.$set(t.formKey,"title",e)},expression:"formKey.title"}})],1)],1),a("div",{staticClass:"clearfix box"},[a("FormItem",{staticClass:"clearfix fl",attrs:{prop:"publish_at"}},[a("span",{staticClass:"fl ml10"},[t._v("开始日期")]),a("DatePicker",{staticClass:"w165x ml20 fl",attrs:{type:"date",placeholder:"请选择日期",options:t.options3},model:{value:t.formKey.publish_at,callback:function(e){t.$set(t.formKey,"publish_at",e)},expression:"formKey.publish_at"}})],1),a("FormItem",{staticClass:"ml5 fl clearfix",attrs:{prop:"offline_at"}},[a("span",{staticClass:"fl ml10"},[t._v("结束日期")]),a("DatePicker",{staticClass:"w165x fl ib ml10",attrs:{type:"date",placeholder:"请选择日期",options:t.options3},model:{value:t.formKey.offline_at,callback:function(e){t.$set(t.formKey,"offline_at",e)},expression:"formKey.offline_at"}})],1)],1),a("FormItem",{attrs:{label:"客户端",prop:"newclient_type"}},[a("CheckboxGroup",{on:{"on-change":t.checkAllGroupChange},model:{value:t.formKey.newclient_type,callback:function(e){t.$set(t.formKey,"newclient_type",e)},expression:"formKey.newclient_type"}},[a("Checkbox",{staticClass:"ml20",attrs:{label:"PC"}}),a("Checkbox",{attrs:{label:"H5"}}),a("Checkbox",{attrs:{label:"Android"}}),a("Checkbox",{attrs:{label:"IOS"}})],1)],1),a("FormItem",{attrs:{label:"编辑内容",prop:"description"}},[a("Input",{staticClass:"ml10",staticStyle:{width:"600px"},attrs:{type:"textarea",rows:14,placeholder:"请输入信息内容"},model:{value:t.formKey.description,callback:function(e){t.$set(t.formKey,"description",e)},expression:"formKey.description"}})],1),a("FormItem",{staticClass:"mt30",attrs:{label:"状态"}},[a("i-switch",{staticClass:"ml30",attrs:{size:"large"},model:{value:t.formKey.status,callback:function(e){t.$set(t.formKey,"status",e)},expression:"formKey.status"}}),a("span",{staticClass:"ml20"},[t._v(t._s(0==t.formKey.status?"未启用":"已启用"))]),a("Button",{staticClass:"ivu-btn addSave ml40",on:{click:t.save}},[t._v(t._s("edit"===t.$route.params.page?"确认保存":"确认新增"))])],1)],1)],1)},s=[],o=(a("28a5"),a("a4bb")),n=a.n(o),r=(a("ac6a"),a("cebc")),l=a("0a0d"),c=a.n(l),f=a("a0f0"),u=a("8593"),p={name:"couseDetial",components:{Editor:f["a"]},data:function(){return{rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],publish_at:[{required:!0,message:"请选择日期",trigger:"change",pattern:/.+/}],offline_at:[{required:!0,message:"请选择日期",trigger:"change",pattern:/.+/}],newclient_type:[{required:!0,message:"请选择客户端",trigger:"change",pattern:/.+/}],description:[{required:!0,message:"请输入内容",trigger:"blur",pattern:/.+/}]},options3:{disabledDate:function(t){return t&&t.valueOf()<c()()-864e5}},searchKey:{text:"text"},type:!1,content:"12312323",switch1:!1,indeterminate:!0,checkAll:!1,checkAllGroup:["PC"],list:[{value:"1",name:"登录前"},{value:"2",name:"登录后"},{value:"3",name:"不限制"}],formKey:{siteId:"",siteName:"",type:"lantern",title:"",publish_at:this.$root.startTime(),offline_at:this.$root.formatnightTimeS(),desc_format_type:"text",description:"",status:"",client_type:"",newclient_type:[]}}},created:function(){if("edit"===this.$route.params.page){var t={id:this.$route.query.id,siteId:this.$root.nowSite.id};this.onDetails(t)}},methods:{onText:function(){},onImg:function(){},save:function(){var t=this;this.$refs.formKey.validate(function(e){if(e){if("add"===t.$route.params.page){var a=Object(r["a"])({},t.formKey),i=[a.publish_at,a.offline_at];if(!t.$root.validatecourseTime(i))return!1;a.publish_at=t.$root.formatTimeS(a.publish_at),a.offline_at=t.$root.formatnightTimeS(a.offline_at),a.siteId=t.$root.nowSite.id,a.siteName=t.$root.nowSite.siteName,1==a.status?a.status="yes":a.status="no",delete a.newclient_type,Object(u["O"])(a).then(function(e){t.$router.push({name:"notice",params:{page:"success"}})})}if("edit"===t.$route.params.page){var s=Object(r["a"])({},t.formKey),o=[s.publish_at,s.offline_at];if(!t.$root.validatecourseTime(o))return!1;s.publish_at=t.$root.formatTimeS(s.publish_at),s.offline_at=t.$root.formatnightTimeS(s.offline_at),s.siteId=t.$root.nowSite.id,s.id=t.$route.query.id,s.siteName=t.$root.nowSite.siteName,1==s.status?s.status="yes":s.status="no",delete s.newclient_type,Object(u["R"])(s).then(function(e){t.$router.push({name:"notice",params:{page:"success"}})})}}})},handleChange:function(t,e){this.formKey.description=e},changeContent:function(){this.$refs.editor.setHtml("<p>powered by wangeditor</p>")},change:function(t){},handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkAllGroup=["PC","H5","Android","IOS"]:this.checkAllGroup=[]},checkAllGroupChange:function(){var t=[];this.showh5=this.formKey.newclient_type.some(function(t){return"H5"==t||"Android"==t||"IOS"==t}),this.formKey.newclient_type.map(function(e){t.push(e)}),t.length>1?this.formKey.client_type=t.join(","):this.formKey.client_type=t[0]},onDetails:function(t){var e=this;Object(u["N"])(t).then(function(t){n()(e.formKey).forEach(function(a){e.formKey[a]="status"==a?"yes"==t.data[a]:"newclient_type"==a||"newappears_location"==a?e.formKey[a]:"publish_at"==a||"offline_at"==a?e.$root.unixTime(t.data[a]):t.data[a]});var a=e.formKey,i=a.newclient_type,s=a.client_type;a.publish_at,a.offline_at;1==s.length?i.push(s):s.split(",").map(function(t){i.push(t)})})}}},m=p,h=(a("8b3d"),a("2877")),d=Object(h["a"])(m,i,s,!1,null,"6efa3bd1",null);e["default"]=d.exports}}]);