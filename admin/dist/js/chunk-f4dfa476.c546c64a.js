(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4dfa476"],{"0a0d":function(e,t,a){e.exports=a("e829")},"22b4":function(e,t,a){"use strict";var s=a("b9a8"),i=a.n(s);i.a},"2a38":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:"lotteryReportDetail"!==e.$route.name,expression:"$route.name!=='lotteryReportDetail'"}],staticClass:"v2-search"},[a("Form",{ref:"searchKey",attrs:{inline:""}},[a("GameSelect",{ref:"GameSelect",attrs:{platforname:e.platformessg,clearable:!0,placeholder:"全部"},on:{"on-game-change":e.onGameChange,"on-platform-change":e.onPlatformChange}}),a("FormItem",{attrs:{label:"开始日期"}},[a("DatePicker",{staticClass:"s-120",attrs:{type:"date",placeholder:"开始时间",options:e.options3},model:{value:e.Time[0],callback:function(t){e.$set(e.Time,0,t)},expression:"Time[0]"}})],1),a("FormItem",{attrs:{label:"结束日期"}},[a("DatePicker",{staticClass:"s-120",attrs:{type:"date",placeholder:"结束时间",options:e.options3},model:{value:e.Time[1],callback:function(t){e.$set(e.Time,1,t)},expression:"Time[1]"}})],1),a("FormItem",{attrs:{label:"注单编号"}},[a("Input",{staticClass:"s-180",attrs:{placeholder:"请输入注单编号"},model:{value:e.searchKey.billNo,callback:function(t){e.$set(e.searchKey,"billNo",t)},expression:"searchKey.billNo"}})],1),a("FormItem",{attrs:{label:"局号"}},[a("Input",{staticClass:"s-140",attrs:{disabled:"live_casino"!==e.searchKey.type,placeholder:"请输入局号"},model:{value:e.searchKey.gameCode,callback:function(t){e.$set(e.searchKey,"gameCode",t)},expression:"searchKey.gameCode"}})],1),a("FormItem",{attrs:{label:"会员账号"}},[a("Input",{staticClass:"s-140",attrs:{placeholder:"多个请以,隔开"},model:{value:e.searchKey.userName,callback:function(t){e.$set(e.searchKey,"userName",t)},expression:"searchKey.userName"}})],1),a("FormItem",[a("Button",{staticClass:"search",attrs:{type:"primary",loading:e.$root.searchBtnLoading},on:{click:e.searchSubmit}},[e._v("查询")])],1),a("FormItem",[a("Button",{staticClass:"ivu-btn export",attrs:{type:"primary",loading:e.$root.exportBtnLoading},on:{click:e.exportExcel}},[e._v("导出EXCEL")])],1)],1)],1),a("div",{staticClass:"v2-table"},[a("Tables",{ref:"table",attrs:{loading:e.$root.tableLoading,columns:e.table.columns,value:e.table.data,total:e.table.total,pageSizeOpts:e.table.pageSizeOpts},on:{"on-page-change":e.onPageChange,"on-page-size-change":e.onPageSizeChange,"on-sort-change":e.sortChange}},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"clearfix"},[a("p",{staticClass:"fl ml20"},[a("span",[e._v("总计")])]),a("p",{staticClass:"fl ml70"},[a("span",[e._v("投注金额")]),a("span",{staticClass:"pl15 red-font"},[e._v(e._s(Number(e.statistics.betAmount).toFixed(2)))])]),a("p",{staticClass:"fl ml70"},[a("span",[e._v("有效投注")]),a("span",{staticClass:"pl15 red-font"},[e._v(e._s(Number(e.statistics.validBetAmount).toFixed(2)))])]),a("p",{staticClass:"fl ml70"},[a("span",[e._v("会员输赢")]),a("span",{staticClass:"pl15 red-font"},[e._v(e._s(Number(e.statistics.netAmount).toFixed(2)))])])])])])],1)])},i=[],n=a("768b"),r=(a("c5f6"),a("75fc")),o=a("cebc"),l=a("0a0d"),m=a.n(l),c=a("8be0"),u=a("fa69"),p=a("fab6"),d=a("e069"),h=a("1c31"),f={name:"gameReport",mixins:[p["a"]],components:{Tables:u["a"],GameSelect:c["a"]},data:function(){var e=this;this.$createElement;return{searchKey:{status:"all",startTime:this.$root.startTime(),endTime:this.$root.formatnightTimeS(),type:"live_casino"},Time:[this.$root.startTime(),this.$root.formatnightTimeS()],columnsKey:"live_casino",statistics:{},platformessg:{},options3:{disabledDate:function(t){return t&&t.valueOf()<m()()-864e5*(e.$root.threemonth()+1)}},columns:[{title:"会员账号",key:"userName",align:"center"},{title:"游戏账号",key:"playerName",align:"center"},{title:"注单编号",key:"billNo",align:"center"},{title:"局号",key:"gameCode",align:"center"},{title:"游戏平台",key:"platform",align:"center"},{title:"投注金额",key:"betAmount",align:"center",render:function(t,a){return t("span",[e.$root.keepTwo(a.row.betAmount)])}},{title:"有效投注",key:"validBetAmount",align:"center",render:function(t,a){return t("span",[e.$root.keepTwo(a.row.validBetAmount)])}},{title:"会员输赢",key:"netAmount",align:"center",render:function(t,a){return t("span",[e.$root.keepTwo(a.row.netAmount)])}},{title:"玩法",key:"gameName",align:"center"},{title:"下注时间",key:"betTime",align:"center",render:function(t,a){return t("span",{class:"pr10 pl10"},[e.$root.unixTime(a.row.betTime)])}}],table:{total:0,columns:[],data:[],pageSizeOpts:[20,30,40,50]}}},created:function(){var e=this;if(this.$nextTick(function(){e.$refs.GameSelect.init()}),this.$route.query.startTime){console.log(this.$route.query);var t=this.$route.query,a=t.startTime,s=t.endTime,i=(t.type,t.platform);this.searchKey=Object(o["a"])({},this.searchKey,this.$route.query),this.searchKey.siteId=this.$root.nowSite.id,this.Time=[a,s],this.platformessg.game="lottery:3",this.platformessg.platform=i,this.updateColumns("lottery")}else this.updateColumns("live_casino")},methods:{updateColumns:function(e){var t=this;this.$createElement;this.table.columns=[];var a=Object(r["a"])(this.columns);switch(e){case"live_casino":this.table.columns=a;break;case"slot":case"chess":this.table.columns=a.filter(function(e){return"gameCode"!==e.key});break;case"lottery":case"vr_lottery":var s=a.filter(function(e){return"gameCode"!==e.key&&"betTime"!==e.key&&"gameName"!==e.key&&"platform"!==e.key&&"userName"!==e.key&&"playerName"!==e.key}),i={lotteryName:{title:"游戏平台",key:"lotteryName",align:"center"},userName:{title:"会员账号",key:"userName",align:"center"},issue:{title:"期数",key:"issue",align:"center"},gameName:{title:"玩法",key:"playwayName",align:"center"},gameNum:{title:"玩号",key:"ball",align:"center"},betContent:{title:"下注内容",key:"betInfo",align:"center"},odds:{title:"赔率",key:"odds",align:"center"},result:{title:"开奖结果",key:"result",align:"center"},rebate:{title:"返点值",key:"rebate",align:"center"},rebateAmount:{title:"返点金额",key:"fdAmount",align:"center",render:function(e,a){return e("span",[t.$root.keepTwo(a.row.fdAmount)])}},billStatus:{title:"结算状态",key:"billStatus",align:"center",render:function(e,t){return e("span",[0==t.row.status?"未结算":1==t.row.status?"赢":2==t.row.status?"输":3==t.row.status?"和":"4"==t.row.status?"用户撤单":"系统撤单"])}},betTime:{title:"下注时间/结算时间",key:"betTime",align:"center",width:150,render:function(e,a){return e("div",{class:"flex-colum"},[e("div",{class:"bb mb5"},[t.$root.unixTime(a.row.betTime)]),e("div",[a.row.openTime>0?t.$root.unixTime(a.row.openTime):"-"])])}}};s.splice(1,0,i.lotteryName,i.userName,i.issue,i.gameName,i.gameNum,i.betContent,i.odds),s.push(i.result,i.rebate,i.rebateAmount,i.billStatus,i.betTime),this.table.columns=s;break;case"sport":var n=a.filter(function(e){return"gameCode"!==e.key&&"betTime"!==e.key&&"gameName"!==e.key}),o={gameType:{title:"游戏种类",key:"gameName",align:"center"},betContent:{title:"下注内容",key:"betInfo",align:"center",width:200,render:function(e,t){var a="";return e(d["Tooltip"],{attrs:{placement:"right"}},[e("div",{slot:"content"},[t.row.betInfo instanceof Array&&t.row.betInfo.map(function(t){var a=t.awayteamname,s=(t.bettypename,t.hdp,t.hometeamname);t.leaguename,t.odds,t.productid,t.teambetname,t.winlostdatetime;return e("div",[a+s])})]),e("div",{class:"text-overflow-ellipsis w200x p5"},[t.row.betInfo instanceof Array&&t.row.betInfo.map(function(e){var t=e.awayteamname,s=(e.bettypename,e.hdp,e.hometeamname);e.leaguename,e.odds,e.productid,e.teambetname,e.winlostdatetime;return a+=t+s})])])}},status:{title:"状态",key:"status",align:"center",render:function(e,t){return 0==t.row.status?e("span",["未结算"]):1==t.row.status?e("span",["已结算"]):2==t.row.status?e("span",["无效"]):void 0}},betTime:{title:"下注时间/结算时间",key:"betTime",align:"center",render:function(e,a){return e("div",{class:"flex-colum"},[e("div",{class:"bb mb5"},[t.$root.unixTime(a.row.betTime)]),e("div",[t.$root.unixTime(a.row.addTime)])])}}};n.splice(3,0,o.gameType,o.betContent),n.push(o.status,o.betTime),this.table.columns=n;break}},onGameChange:function(e){this.searchKey.type=e,this.columnsKey=e},onPlatformChange:function(e){this.searchKey.platform=e},getData:function(e){var t=this,a=e.params;for(var s in a)a[s]||delete a[s];this.$root.startTableLoading(),e.params.isLike&&(e.params.isLike=Number(e.params.isLike)),"all"==e.params.platform&&delete e.params.platform,Object(h["h"])(e).then(function(e){var a=e.data.data,s=a.list,i=a.total;t.statistics=i,t.table.data=s,t.table.total=e.data.total})},searchSubmit:function(){this.$refs.table.setPage(),this.updateColumns(this.columnsKey);var e=Object(o["a"])({},this.searchKey);if(e.siteId=this.nowSite.id,!this.$root.validateTime(this.Time))return!1;var t=this.$root.validateTime(this.Time),a=Object(n["a"])(t,2),s=a[0],i=a[1];if(e.startTime=s&&this.$root.formatTimeS(s),e.endTime=i&&this.$root.formatnightTimeS(i),this.searchKey.startTime=e.startTime,this.searchKey.endTime=e.endTime,e.userName&&e.userName.length<5)return this.$Tip.info({content:"会员账号最小5个字符！"}),!1;if(e.billNo&&e.billNo.length<6)return this.$Tip.info({content:"注单编号最小6个字符！"}),!1;if(e.gameCode&&e.gameCode.length<5)return this.$Tip.info({content:"局号最小5个字符！"}),!1;if(!e.startTime&&!e.endTime)return this.$Tip.info({content:"时间还未选择"}),!1;for(var r in e.userName||delete e.isLike,e)e[r]||delete e[r];this.getData({params:e})}}},b=f,y=(a("22b4"),a("2877")),g=Object(y["a"])(b,s,i,!1,null,"147df8ea",null);t["default"]=g.exports},"2f37":function(e,t,a){var s=a("63b6");s(s.S,"Date",{now:function(){return(new Date).getTime()}})},b9a8:function(e,t,a){},e829:function(e,t,a){a("2f37"),e.exports=a("584a").Date.now}}]);