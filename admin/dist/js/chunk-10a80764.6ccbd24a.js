(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10a80764"],{"134a":function(t,e,a){},"2ca4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("collapse",{attrs:{simple:"",value:"1"}},[a("panel",{attrs:{name:"1","hide-arrow":!0}},[a("div",{staticClass:"title",on:{click:function(e){t.open=!t.open}}},[t._v("返点设置\n      "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.open,expression:"!open"}],attrs:{type:"ios-arrow-down",size:"18",color:"#999"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],attrs:{type:"ios-arrow-forward",size:"18",color:"#999"}})],1),a("div",{staticClass:"section p15",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"btns"},t._l(t.lottMenu,function(e,n){return a("Button",{key:n,staticClass:"lottery mr20",class:t.showKey==e?"bd-bg":"bg-or",on:{click:function(a){return t.onselectLott(e,n)}}},[t._v(t._s(e))])}),1),a("div",{staticClass:"clearfix"},[t.$route.params.page?a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl clearfix h60"},[a("div",{staticClass:"label fl"},[t._v("统一设置：")]),a("Select",{staticClass:"fl",staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{"on-change":t.batchSetRebate},model:{value:t.batchRebate,callback:function(e){t.batchRebate=e},expression:"batchRebate"}},t._l(t.defaultOptions,function(e,n){return a("Option",{key:n,attrs:{value:e}},[t._v(t._s(e)+"%")])}),1)],1),a("div",{staticClass:"fl ml20 clearfix h60"},[a("div",{staticClass:"label fl"},[t._v("批量设置：")]),a("div",{staticClass:"fl"},[a("Button",{attrs:{icon:"ios-remove",size:"small"},on:{click:t.reduceRebate}}),a("Button",{staticClass:"ml20",attrs:{icon:"ios-add",size:"small"},on:{click:t.addRebate}})],1)])]):t._e(),t._l(t.lottSub[t.showKey],function(e){return a("div",{key:e.id,staticClass:"clearfix w25 h40 fl"},[a("div",{staticClass:"label fl"},[t._v(t._s(e.name)+"：")]),t.$route.params.page?a("div",{staticClass:"fl"},[a("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{"on-change":t.selectSingleRabate},model:{value:e.rebate,callback:function(a){t.$set(e,"rebate",a)},expression:"lott.rebate"}},t._l(e.options,function(e,n){return a("Option",{key:n,attrs:{value:e}},[t._v(t._s(e)+"%")])}),1),t.showParent?a("span",{staticClass:"tip"},[t._v("上限："+t._s((+e.parent_rebate).toFixed(2)||"-")+"%")]):t._e()],1):a("div",[t._v(t._s(e.rebate)+"%")])])})],2)])])],1)},r=[],s=a("f499"),o=a.n(s),i=(a("c5f6"),a("ac6a"),a("83ae")),c=a("c276"),l={components:{Icons:i["a"]},props:{data:{type:Array,required:!0,default:function(){return[]}},showParent:{type:Boolean,default:!1}},data:function(){return{open:!1,lottIndex:0,showKey:"六合彩",batchRebate:""}},computed:{defaultOptions:function(){for(var t=[],e=0;e<3;e++)for(var a=0;a<=10;a++){var n=.1*a;t[t.length]=(e+n).toFixed(2)}return t},lottMenu:function(){for(var t=[],e=0;e<this.data.length;e++)t[t.length]=this.data[e].className;return Object(c["n"])(t)},lottSub:function(){for(var t={},e=0;e<this.lottMenu.length;e++){var a=this.lottMenu[e];t[a]=[];for(var n=0;n<this.data.length;n++)if(this.data[n].className===this.lottMenu[e]){var r=t[a].length;this.data[n].options=this.createOptions(+this.data[n].parent_rebate||3),t[a][r]=this.data[n]}}for(var s in t)t[s].forEach(function(t){t.rebate=Number(t.rebate).toFixed(2)});return t}},methods:{batchSetRebate:function(t){t&&(this.lottSub[this.showKey].forEach(function(e){e.rebate=t}),this.createData())},selectSingleRabate:function(){this.createData()},onselectLott:function(t,e){this.lottIndex=e,this.showKey=t,this.batchRebate=""},reduceRebate:function(t){this.lottSub[this.showKey].forEach(function(t){var e=+t.rebate-.1;e=e<=0?0:e,t.rebate=e.toFixed(2)}),this.createData()},addRebate:function(){this.lottSub[this.showKey].forEach(function(t){var e=+t.rebate+.1;e=e>=+t.parent_rebate?+t.parent_rebate:e,t.rebate=e.toFixed(2)}),this.createData()},createOptions:function(t){for(var e=[],a=0;a<t;a++)for(var n=0;n<=10;n++){var r=.1*n;a+r<=t&&e.push((a+r).toFixed(2))}return e},createData:function(){var t={};return this.data.forEach(function(e){var a="CT_".concat(e.id,"_LOTTERY");t[a]=e.rebate}),this.$emit("on-rebate-change",o()(t)),o()(t)}}},u=l,f=(a("8c6e"),a("2877")),d=Object(f["a"])(u,n,r,!1,null,"259de1b0",null),m=d.exports;e["a"]=m},"5c64":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("collapse",{attrs:{simple:"",value:"1"}},[a("panel",{attrs:{name:"1","hide-arrow":!0}},[a("div",{staticClass:"title",on:{click:function(e){t.open=!t.open}}},[t._v("\n      返水设置\n      "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.open,expression:"!open"}],attrs:{type:"ios-arrow-down",size:"18",color:"#999"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],attrs:{type:"ios-arrow-forward",size:"18",color:"#999"}})],1),a("div",{staticClass:"section p15",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"btns"},t._l(t._data_,function(e,n){return a("Button",{key:e.name,staticClass:"lottery mr20",class:t.showKey==n?"bd-bg":"bg-or",on:{click:function(e){return t.onselectMenu(n)}}},[t._v(t._s(e.name))])}),1),t._data_[t.showKey]?a("div",{staticClass:"clearfix info pt10"},t._l(t._data_[t.showKey].list,function(e){return a("div",{key:e.name_en,staticClass:"clearfix w20 h40 fl"},[a("div",{staticClass:"label fl"},[t._v(t._s(e.name_cn)+"：")]),t.$route.params.page?a("div",{staticClass:"fl"},[a("InputNumber",{staticClass:"w60xh36",attrs:{step:.1,max:e.parent_refund,min:0},on:{"on-change":t.onChange},model:{value:e.refund,callback:function(a){t.$set(e,"refund",a)},expression:"sub.refund"}}),t.showParent?a("span",{staticClass:"tip"},[a("span",{staticClass:"mr5"},[t._v("上限")]),t._v("\n              "+t._s(e.parent_refund.toFixed(2)||"-")+"\n            ")]):t._e()],1):a("div",[t._v(t._s(e.refund))])])}),0):t._e()])])],1)},r=[],s=a("f499"),o=a.n(s),i=(a("ac6a"),a("cebc")),c=a("83ae"),l=(a("c276"),{components:{Icons:c["a"]},props:{data:{type:[Object,Array],required:!0,default:function(){}},showParent:{type:Boolean,required:!1,default:!1}},data:function(){return{open:!1,showKey:"live"}},computed:{_data_:function(){var t=Object(i["a"])({},this.data);for(var e in t)t[e].list.forEach(function(t){t.refund=+t.refund,t.parent_refund=+t.parent_refund});return t}},methods:{onselectMenu:function(t){this.showKey=t},onChange:function(t){this.createData()},createData:function(){var t={};for(var e in this._data_)this._data_[e].list.forEach(function(e){t[e.name_en]=e.refund});return this.$emit("on-refund-change",o()(t)),o()(t)}}}),u=l,f=(a("6e9d"),a("2877")),d=Object(f["a"])(u,n,r,!1,null,"deef8c56",null),m=d.exports;e["a"]=m},"6e9d":function(t,e,a){"use strict";var n=a("134a"),r=a.n(n);r.a},"8c6e":function(t,e,a){"use strict";var n=a("fac7"),r=a.n(n);r.a},"9cee":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formKey",attrs:{model:t.formKey,rules:t.rules,"label-width":100}},[a("FormItem",{attrs:{label:"代理账号"}},[a("Input",{staticClass:"w260x",attrs:{disabled:""},model:{value:t.formKey.userName?t.formKey.userName:t.formData.userName,callback:function(e){t.$set(t.formKey.userName?t.formKey.userName:t.formData,"userName",e)},expression:"formKey.userName?formKey.userName:formData.userName"}})],1),a("FormItem",{attrs:{label:"代理类型"}},[a("Input",{staticClass:"w260x",attrs:{disabled:""},model:{value:t.formKey.agent_type?t.formKey.agent_type:t.formData.agent_type,callback:function(e){t.$set(t.formKey.agent_type?t.formKey.agent_type:t.formData,"agent_type",e)},expression:"formKey.agent_type ? formKey.agent_type : formData.agent_type "}})],1),a("FormItem",{attrs:{label:"代理网址",prop:"domain"}},[a("Input",{staticClass:"w260x",attrs:{type:"textarea",rows:4},model:{value:t.formKey.domain,callback:function(e){t.$set(t.formKey,"domain",e)},expression:"formKey.domain"}})],1),a("div",[a("div",{staticStyle:{marginTop:"80px"}},[a("rebate-select",{ref:"rebateSelect",attrs:{data:t.rebate},on:{"on-rebate-change":t.onRebateChange}}),a("refund-select",{ref:"refundSelect",attrs:{data:t.refund},on:{"on-refund-change":t.onRefundChange}})],1)]),a("FormItem",[a("Button",{staticClass:"mt15 ivu-btn save",attrs:{loading:t.$root.editBtnLoading},on:{click:t.submit}},[t._v("确认保存")])],1)],1)],1)},r=[],s=(a("7f7f"),a("ac6a"),a("83ae")),o=a("f28b"),i=a("5c64"),c=a("2ca4"),l={name:"editDomain",components:{Icons:s["a"],RefundSelect:i["a"],RebateSelect:c["a"]},data:function(){return{rebate:[],refund:{},formKey:{},formData:{},rules:{domain:[{required:!0,message:"请输入网址",trigger:"blur"}]}}},beforeRouteEnter:function(t,e,a){a(function(t){var e={siteId:t.$root.nowSite.id,id:t.$route.query.id};t.getData(e)})},methods:{submit:function(){var t=this;this.$refs.formKey.validate(function(e){if(e){delete t.formKey.agent_type,delete t.formKey.userName,t.formKey.rebate||(t.formKey.rebate=t.$refs.rebateSelect.createData()),t.formKey.platform||(t.formKey.platform=t.$refs.refundSelect.createData());var a=t.formKey,n=a.id,r=a.is_agency,s=a.status,i=a.admin_status,c=a.domain,l=a.rebate,u=a.platform,f={siteId:t.$root.nowSite.id,id:n,is_agency:r,status:s,admin_status:i,domain:c,rebate:l,platform:u};Object(o["g"])(f).then(function(e){if(void 0==e)return!1;200==e.code&&t.goDomainList()})}})},onRebateChange:function(t){this.formKey.rebate=t},onRefundChange:function(t){this.formKey.platform=t},getRebateData:function(t,e){for(var a in this.rebate=t,e)e[a].list.forEach(function(t){t.name_cn=t.name,t.name_en=t.key});this.refund=e},goDomainList:function(){this.$router.push({name:"agencyDomain"})},getData:function(t){var e=this;Object(o["e"])(t).then(function(t){var a=t.data,n=a.userName,r=a.domain,s=a.rebate,o=a.platform,i=a.agent_type,c=a.id,l=a.is_agency,u=a.status,f=a.admin_status;e.formData.userName=n;var d=i-1;e.formKey={userName:n,domain:r,agent_type:i,id:c,is_agency:l,status:u,admin_status:f},e.formKey.agent_type=d>0?"".concat(d,"级代理"):"大股东",e.formData.agent_type=d>0?"".concat(d,"级代理"):"大股东",e.getRebateData(s,o)})}}},u=l,f=(a("c5a5"),a("2877")),d=Object(f["a"])(u,n,r,!1,null,"01bc3448",null);e["default"]=d.exports},c5a5:function(t,e,a){"use strict";var n=a("eb44"),r=a.n(n);r.a},eb44:function(t,e,a){},fac7:function(t,e,a){}}]);