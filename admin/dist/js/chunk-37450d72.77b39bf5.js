(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37450d72"],{"0874":function(e,t,r){},4475:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["单选"===e.mode?r("div",[r("Select",{class:e.className,style:e._width,attrs:{clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder},model:{value:e.singleData.levelLabel,callback:function(t){e.$set(e.singleData,"levelLabel",t)},expression:"singleData.levelLabel"}},e._l(e.levelList,function(t){return r("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(!!t.levelAlias&&(!e.choiceShow&&t.levelAlias)||t.levelName))])}),1)],1):"多选"===e.mode?r("div",[r("Select",{ref:"selector",class:e.className,style:e._width,attrs:{clearable:e.clearable,multiple:"",disabled:e.disabled,placeholder:e.placeholder},model:{value:e.multipleData.levelLabel,callback:function(t){e.$set(e.multipleData,"levelLabel",t)},expression:"multipleData.levelLabel"}},[e.allModal?r("Option",{attrs:{value:"all"}},[e._v("全部")]):e._e(),e._l(e.levelList,function(t){return r("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(t.levelAlias||t.levelName))])})],2)],1):"单选全部"===e.mode?r("div",[r("Select",{class:e.className,style:e._width,attrs:{clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder},model:{value:e.singleData.levelLabel,callback:function(t){e.$set(e.singleData,"levelLabel",t)},expression:"singleData.levelLabel"}},[e.allModal?r("Option",{attrs:{value:"all"}},[e._v("全部")]):e._e(),e._l(e.levelList,function(t){return r("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(t.levelAlias||t.levelName))])})],2)],1):e._e()])},a=[],u=r("cebc"),s=(r("ac6a"),r("28a5"),r("96cf"),r("3b8d")),i=(r("6762"),r("2fdb"),r("c5f6"),r("8194")),l=r("f28b"),o={props:{choiceShow:{type:Boolean,default:!1},allModal:{type:Boolean,default:!1},mode:{type:String,default:"单选"},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:260},levelType:{type:String},className:{type:String}},data:function(){return{singleData:{levelLabel:""},multipleData:{levelLabel:[]},levelList:[],subType:""}},computed:{_width:function(){return"width:"+this.width+"px"}},watch:{"multipleData.levelLabel":function(e,t){!t.includes("all")&&e.includes("all")&&(this.multipleData.levelLabel=["all"]),t.includes("all")&&e.length>1&&this.multipleData.levelLabel.splice(e.indexOf("all"),1)},singleData:{handler:function(e,t){this.singleChange(e)},deep:!0},multipleData:{handler:function(e,t){this.multipleChange(e)},deep:!0},allModal:function(){this.checkAll()}},mounted:function(){this.checkAll()},methods:{checkAll:function(){},setDefaultLevel:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:"单选"===this.mode?(this.singleData.levelLabel=+t,this.singleData.levelName=r,this.$set(this.singleData,"levelLabel",+t)):"string"==typeof t?(n=t.split(","),n.forEach(function(e){a.multipleData.levelLabel.push(Number(e))})):this.multipleData.levelLabel=t;case 1:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),init:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("member"!==this.levelType){e.next=11;break}if("addLevel"!==this.subType){e.next=6;break}this.levelList=this.$store.state.info.memberLevelList,this.subType="",e.next=9;break;case 6:return e.next=8,this.getMemberLevel(t,"select");case 8:this.levelList=e.sent;case 9:e.next=18;break;case 11:if("agency"!==this.levelType){e.next=17;break}return e.next=14,this.getAgencyLevel(t,"select");case 14:this.levelList=e.sent,e.next=18;break;case 17:"refund"===this.levelType&&(this.levelList=this.$store.state.info.memberLevelList);case 18:return r&&(n=r.levelLabel,a=r.levelName,this.setDefaultLevel(n,a)),e.abrupt("return",this.levelList);case 20:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),singleChange:function(e){if(this.multipleData.levelLabel.includes("all")){var t={levelLabel:[],levelName:[]},r=[];this.levelList.forEach(function(e){t.levelLabel.push(e.levelLabel),t.levelName.push(e.levelName),r.push(e.levelLabel)}),this.$emit("on-level-change",t)}else{var n=Object(u["a"])({},this.singleData);this.levelList.forEach(function(t){e.levelLabel==t.levelLabel&&(n.levelName=t.levelName,n.id=t.id)}),this.$emit("on-level-change",n)}},multipleChange:function(e){if(this.multipleData.levelLabel.includes("all")){var t={levelLabel:[],levelName:[]},r=[];this.levelList.forEach(function(e){t.levelLabel.push(e.levelLabel),t.levelName.push(e.levelName),r.push(e.levelLabel)}),this.$emit("on-level-change",t)}else{var n=Object(u["a"])({},this.multipleData);n.levelName=[],this.levelList.forEach(function(e){n.levelLabel&&n.levelLabel.forEach(function(t){t==e.levelLabel&&n.levelName.push(e.levelName)})}),this.$emit("on-level-change",n)}},getMemberLevel:function(e,t){var r=this;return Object(i["e"])({siteId:e,purpose:t}).then(function(e){return r.$emit("sendLevelName",e.data),e.data})},getAgencyLevel:function(e,t){return Object(l["l"])({siteId:e,purpose:t}).then(function(e){return e.data})},reset:function(e){"undefined"===typeof e?this.multipleData.levelLabel=[]:"single"===e&&(this.singleData.levelLabel="")},changeSubType:function(e){this.subType=e}}},c=o,d=r("2877"),m=Object(d["a"])(c,n,a,!1,null,null,null),f=m.exports;t["a"]=f},"824f":function(e,t,r){"use strict";var n=r("0874"),a=r.n(n);a.a},8593:function(e,t,r){"use strict";r.d(t,"mb",function(){return a}),r.d(t,"rb",function(){return u}),r.d(t,"C",function(){return s}),r.d(t,"k",function(){return i}),r.d(t,"Ab",function(){return l}),r.d(t,"hb",function(){return o}),r.d(t,"I",function(){return c}),r.d(t,"J",function(){return d}),r.d(t,"db",function(){return m}),r.d(t,"gb",function(){return f}),r.d(t,"eb",function(){return h}),r.d(t,"fb",function(){return v}),r.d(t,"l",function(){return p}),r.d(t,"H",function(){return b}),r.d(t,"lb",function(){return g}),r.d(t,"nb",function(){return y}),r.d(t,"jb",function(){return L}),r.d(t,"kb",function(){return q}),r.d(t,"tb",function(){return k}),r.d(t,"wb",function(){return w}),r.d(t,"sb",function(){return x}),r.d(t,"ub",function(){return D}),r.d(t,"vb",function(){return N}),r.d(t,"xb",function(){return $}),r.d(t,"x",function(){return _}),r.d(t,"y",function(){return I}),r.d(t,"z",function(){return C}),r.d(t,"K",function(){return S}),r.d(t,"qb",function(){return M}),r.d(t,"D",function(){return A}),r.d(t,"ob",function(){return K}),r.d(t,"pb",function(){return E}),r.d(t,"L",function(){return O}),r.d(t,"ib",function(){return P}),r.d(t,"U",function(){return B}),r.d(t,"V",function(){return j}),r.d(t,"S",function(){return U}),r.d(t,"T",function(){return R}),r.d(t,"W",function(){return T}),r.d(t,"ab",function(){return F}),r.d(t,"Y",function(){return J}),r.d(t,"X",function(){return G}),r.d(t,"bb",function(){return z}),r.d(t,"Z",function(){return Z}),r.d(t,"cb",function(){return W}),r.d(t,"P",function(){return H}),r.d(t,"N",function(){return Q}),r.d(t,"M",function(){return V}),r.d(t,"Q",function(){return X}),r.d(t,"O",function(){return Y}),r.d(t,"R",function(){return ee}),r.d(t,"u",function(){return te}),r.d(t,"s",function(){return re}),r.d(t,"r",function(){return ne}),r.d(t,"v",function(){return ae}),r.d(t,"t",function(){return ue}),r.d(t,"w",function(){return se}),r.d(t,"p",function(){return ie}),r.d(t,"A",function(){return le}),r.d(t,"n",function(){return oe}),r.d(t,"o",function(){return ce}),r.d(t,"B",function(){return de}),r.d(t,"m",function(){return me}),r.d(t,"q",function(){return fe}),r.d(t,"i",function(){return he}),r.d(t,"h",function(){return ve}),r.d(t,"j",function(){return pe}),r.d(t,"f",function(){return be}),r.d(t,"g",function(){return ge}),r.d(t,"e",function(){return ye}),r.d(t,"a",function(){return Le}),r.d(t,"d",function(){return qe}),r.d(t,"c",function(){return ke}),r.d(t,"b",function(){return we}),r.d(t,"zb",function(){return xe}),r.d(t,"yb",function(){return De}),r.d(t,"F",function(){return Ne}),r.d(t,"E",function(){return $e}),r.d(t,"G",function(){return _e});var n=r("66df"),a=function(e){var t=e.params,r=e.query,a={url:"siteManagementList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},u=function(e){var t={url:"/menuSort",method:"post",data:e};return n["a"].request(t)},s=function(e){var t={url:"/menuDel",method:"post",data:e};return n["a"].request(t)},i=function(e){var t={url:"/menuAdd",method:"post",data:e};return n["a"].request(t)},l=function(e){var t={url:"/menuUpdate",method:"post",data:e};return n["a"].request(t)},o=function(e){var t={url:"/permissionSearchUri",method:"post",data:e};return n["a"].request(t)},c=function(e){var t={url:"/permissionList",method:"get",data:e};return n["a"].request(t)},d=function(){var e={url:"/roleList",method:"get"};return n["a"].request(e)},m=function(e){var t={url:"/roleAdd",method:"post",data:e};return n["a"].request(t)},f=function(e){var t={url:"/roleUpdate",method:"post",data:e};return n["a"].request(t)},h=function(e){var t={url:"/roleDel",method:"post",data:e};return n["a"].request(t)},v=function(e){var t={url:"/roleDetail",method:"post",data:e};return n["a"].request(t)},p=function(e){var t={url:"/adminModifyStatus",method:"get",params:e};return n["a"].request(t)},b=function(e){var t=e.params,r=e.query,a={url:"/adminLogList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},g=function(e){var t={url:"siteManagementDetail",method:"get",params:e};return n["a"].request(t)},y=function(e){var t={url:"siteManagementUpdate",method:"post",data:e};return n["a"].request(t)},L=function(e){var t={url:"siteManagementCreate",method:"post",data:e};return n["a"].request(t)},q=function(){var e={url:"siteManagementDbId",method:"get"};return n["a"].request(e)},k=function(e){var t=e.params,r=e.query,a={url:"systemMemberLevelList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},w=function(e){var t=e.params,r=e.query,a={url:"systemMemberRefundLevelList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},x=function(e){var t={url:"systemMemberLevelAdd",method:"post",data:e};return n["a"].request(t)},D=function(e){var t={url:"systemMemberLevelUp",method:"post",data:e};return n["a"].request(t)},N=function(e){var t={url:"systemMemberRefundLevelAdd",method:"post",data:e};return n["a"].request(t)},$=function(e){var t={url:"systemMemberRefundLevelUp",method:"post",data:e};return n["a"].request(t)},_=function(e){var t={url:"blackList",method:"get",params:e};return n["a"].request(t)},I=function(e){var t={url:"blackListCreate",method:"post",data:e};return n["a"].request(t)},C=function(e){var t={url:"blackListDelete",method:"get",params:e};return n["a"].request(t)},S=function(e){var t={url:"/slideList",method:"get",params:e};return n["a"].request(t)},M=function(e){var t={url:"slideIns",method:"post",data:e};return n["a"].request(t)},A=function(e){var t={url:"/slideDel",method:"get",params:e};return n["a"].request(t)},K=function(e){var t={url:"/slideImgInfo",method:"get",params:e};return n["a"].request(t)},E=function(e){var t={url:"slideImgInfoUpt",method:"post",data:e};return n["a"].request(t)},O=function(e){var t=e.params,r=e.query,a={url:"inBox",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},P=function(e){var t=e.params,r=e.query,a={url:"outBox",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},B=function(e){var t={url:"letterReply",method:"post",data:e};return n["a"].request(t)},j=function(e){var t={url:"letterSend",method:"post",data:e};return n["a"].request(t)},U=function(e){var t={url:"letterDel",method:"post",data:e};return n["a"].request(t)},R=function(e){var t={url:"/letterDetail",method:"get",params:e};return n["a"].request(t)},T=function(e){var t={url:"/letterUptRead",method:"get",params:e};return n["a"].request(t)},F=function(e){var t=e.params,r=e.query,a={url:"popupsList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},J=function(e){var t={url:"popupsDetail",method:"get",params:e};return n["a"].request(t)},G=function(e){var t={url:"/popupsDel",method:"get",params:e};return n["a"].request(t)},z=function(e){var t={url:"popupsStatusChange",method:"post",data:e};return n["a"].request(t)},Z=function(e){var t={url:"popupsIns",method:"post",data:e};return n["a"].request(t)},W=function(e){var t={url:"popupsUpt",method:"post",data:e};return n["a"].request(t)},H=function(e){var t=e.params,r=e.query,a={url:"lanternList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},Q=function(e){var t={url:"lanternDetail",method:"get",params:e};return n["a"].request(t)},V=function(e){var t={url:"/lanternDel",method:"get",params:e};return n["a"].request(t)},X=function(e){var t={url:"lanternStatusChange",method:"post",data:e};return n["a"].request(t)},Y=function(e){var t={url:"lanternIns",method:"post",data:e};return n["a"].request(t)},ee=function(e){var t={url:"lanternUpt",method:"post",data:e};return n["a"].request(t)},te=function(e){var t=e.params,r=e.query,a={url:"articleList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},re=function(e){var t={url:"articleDetail",method:"get",params:e};return n["a"].request(t)},ne=function(e){var t={url:"/articleDel",method:"get",params:e};return n["a"].request(t)},ae=function(e){var t={url:"articleStatusChange",method:"post",data:e};return n["a"].request(t)},ue=function(e){var t={url:"articleIns",method:"post",data:e};return n["a"].request(t)},se=function(e){var t={url:"articleUpt",method:"post",data:e};return n["a"].request(t)},ie=function(e){var t=e.params,r=e.query,a={url:"adminNewList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},le=function(e){var t={url:"changePassWord",method:"post",data:e};return n["a"].request(t)},oe=function(e){var t={url:"adminNewDelete",method:"post",data:e};return n["a"].request(t)},ce=function(e){var t={url:"adminNewDetail",method:"post",data:e};return n["a"].request(t)},de=function(e){var t={url:"copyAdmin",method:"post",data:e};return n["a"].request(t)},me=function(e){var t={url:"adminNewAdd",method:"post",data:e};return n["a"].request(t)},fe=function(e){var t={url:"adminNewUpdate",method:"post",data:e};return n["a"].request(t)},he=function(e){var t=e.params,r=e.query,a={url:"activityList",method:"post",data:t};return r&&(a.params=r),n["a"].request(a)},ve=function(e){var t={url:"activityIns",method:"post",data:e};return n["a"].request(t)},pe=function(e){var t={url:"activityUpt",method:"post",data:e};return n["a"].request(t)},be=function(e){var t={url:"/activityDel",method:"get",params:e};return n["a"].request(t)},ge=function(e){var t={url:"/activityDetail",method:"get",params:e};return n["a"].request(t)},ye=function(e){var t={url:"activityChangeStatus",method:"post",data:e};return n["a"].request(t)},Le=function(e){var t={url:"/activityBySort",method:"get",params:e};return n["a"].request(t)},qe=function(e){var t={url:"/activityCateList",method:"get",params:e};return n["a"].request(t)},ke=function(e){var t={url:"activityCateIns",method:"post",data:e};return n["a"].request(t)},we=function(e){var t={url:"/activityCateDel",method:"get",params:e};return n["a"].request(t)},xe=function(e){var t={url:"systemSiteGameUp",method:"post",data:e};return n["a"].request(t)},De=function(e){var t={url:"systemSiteGameList",method:"post",data:e};return n["a"].request(t)},Ne=function(e){var t={url:"gameConfigList",method:"post",data:e};return n["a"].request(t)},$e=function(e){var t={url:"/gameConfigClassification",method:"get",params:e};return n["a"].request(t)},_e=function(e){var t={url:"/gameConfigUpGameStatus",method:"post",data:e};return n["a"].request(t)}},b380:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"formKey",attrs:{model:e.formKey,rules:e.rules,"label-width":120}},[r("FormItem",{attrs:{label:"创建人"}},[r("Input",{staticClass:"w320x",attrs:{disabled:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),r("FormItem",{attrs:{label:"管理员账号",prop:"userName"}},[r("Input",{staticClass:"w320x",attrs:{placeholder:"请输入6-20位数字或字母"},model:{value:e.formKey.userName,callback:function(t){e.$set(e.formKey,"userName",t)},expression:"formKey.userName"}})],1),e.$route.query.id?e._e():r("FormItem",{attrs:{label:"管理员密码",prop:"password"}},[r("Input",{staticClass:"w320x",attrs:{placeholder:"请输入8-20位数字或字母"},model:{value:e.formKey.password,callback:function(t){e.$set(e.formKey,"password",t)},expression:"formKey.password"}})],1),r("FormItem",{attrs:{label:"管理员别称",prop:"otherName"}},[r("Input",{staticClass:"w320x",attrs:{placeholder:"请输入管理员别称"},model:{value:e.formKey.otherName,callback:function(t){e.$set(e.formKey,"otherName",t)},expression:"formKey.otherName"}})],1),r("FormItem",{attrs:{label:"管理站点"}},[r("SiteSelect",{ref:"SiteSelect",staticClass:"ib",attrs:{width:"320",mode:"多选",clearable:!1,siteList:e.accessSite||[]},on:{"on-site-change":e.onSiteChange}}),r("Button",{staticClass:"oldColor w120x ib ml20",on:{click:e.changeCurrentBtn}},[e._v("编辑权限")])],1),e.formKey.levelId?r("FormItem",{attrs:{label:"出入款操作等级"}},[r("LevelSelect",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"LevelSelect",attrs:{mode:"多选",levelType:"member"},on:{"on-change":e.onLevelChange}}),e._l(e.levelPermission,function(t){return r("div",{key:t.siteId},[t.levels.length?r("div",[r("span",{staticClass:"ib w70x"},[e._v(e._s(t.siteName))]),r("Checkbox",{attrs:{indeterminate:t.indeterminate},on:{"on-change":function(r){return e.checkAll(t,r)}},model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"permission.checked"}},[e._v("全选")]),r("div",{staticClass:"ib"},e._l(t.levels.slice(0,12),function(n){return r("Checkbox",{key:n.id,attrs:{value:n.levelLabel},on:{"on-change":function(r){return e.checkOne(t,n,r)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"t.checked"}},[e._v(e._s(n.levelName))])}),1),r("div",{staticClass:"ml70"},e._l(t.levels.slice(12,t.levels.length),function(n){return r("Checkbox",{key:n.id,attrs:{value:n.levelLabel},on:{"on-change":function(r){return e.checkOne(t,n,r)}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"t.checked"}},[e._v(e._s(n.levelName))])}),1)],1):e._e()])})],2):e._e(),r("FormItem",{attrs:{label:"最大加款"}},[r("Input",{staticClass:"w320x",attrs:{placeholder:"0或空表示无上限"},model:{value:e.formKey.maxAddMoney,callback:function(t){e.$set(e.formKey,"maxAddMoney",t)},expression:"formKey.maxAddMoney"}})],1),"edit"==e.$route.params.page?r("FormItem",{attrs:{label:"状态"}},[r("Select",{staticClass:"w320x",model:{value:e.formKey.status,callback:function(t){e.$set(e.formKey,"status",t)},expression:"formKey.status"}},[r("Option",{attrs:{value:"yes"}},[e._v("正常")]),r("Option",{attrs:{value:"no"}},[e._v("停用")])],1)],1):e._e(),r("FormItem",{staticClass:"origin"},[r("Button",{on:{click:e.saveAll}},[e._v(e._s("edit"==e.$route.params.page?"确认保存":"确认添加"))])],1)],1),r("Modals",{ref:"editPermission",attrs:{title:"编辑权限",width:"1000"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("ButtonGroup",{staticStyle:{margin:"auto"}},e._l(e.currentPermission,function(t,n){return r("Button",{key:n,class:e.currentBtn==t.menu_name?"bd-bg w135x":"bg-or w135x",on:{click:function(r){return e.changeCurrent(t.menu_name)}}},[e._v(e._s(t.menu_name))])}),1),r("div",e._l(e.currentPermission,function(t,n){return t.menu_name==e.currentBtn?r("div",{key:n,staticClass:"clearfix"},e._l(t.newList,function(t,n){return r("div",{key:"in"+n,staticClass:"pre"},[r("Checkbox",{staticClass:"ml10",attrs:{label:t.name},model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}},[r("span",[e._v(e._s(t.value))])])],1)}),0):e._e()}),0),r("Button",{staticClass:"tijiao",on:{click:e.savePremission}},[e._v("提交保存")])],1)])],1)},a=[],u=r("b6d0"),s=r.n(u),i=r("774e"),l=r.n(i),o=r("f499"),c=r.n(o),d=(r("96cf"),r("3b8d")),m=r("795b"),f=r.n(m),h=(r("2fdb"),r("6762"),r("28a5"),r("7f7f"),r("ac6a"),r("cebc")),v=r("2f62"),p=r("4475"),b=r("c9a0"),g=r("d027"),y=(r("8194"),r("8593")),L=r("c276"),q={name:"adminEdit",computed:Object(h["a"])({username:function(){return Object(L["k"])()}},Object(v["d"])({accessSite:function(e){return e.user.accessSite},authMenu:function(e){return e.user.authMenu}})),components:{Modals:g["a"],SiteSelect:b["a"],LevelSelect:p["a"]},data:function(){return{postData:{menu:[]},exitAuthMenu:[],showPermission:[],currentBtn:"会员管理",menuName:"",currentPermission:[],formKey:{userName:"",password:"",otherName:"",siteId:[],levelId:[],maxAddMoney:"0",status:""},rules:{userName:[{required:!0,message:"请输入管理员账号",trigger:"blur"},{trigger:"blur",message:"请输入6-20位数字字母",pattern:/^[A-Za-z0-9]{6,20}$/}],password:[{required:!0,message:"请输入管理员密码",trigger:"blur"},{required:!0,message:"请输入8-20位数字字母",pattern:/^[A-Za-z0-9]{8,20}$/}],otherName:[{required:!0,message:"请输入管理员别称",trigger:"blur"}]},levelPermission:[]}},created:function(){var e=this;this.$nextTick(function(){e.currentPermission=JSON.parse(e.authMenu),e.currentPermission.forEach(function(e){for(var t in e.newList=[],e.list)e.newList.push({name:t,value:e.list[t],checked:!1})}),e.$route.query.id&&Object(y["o"])({adminId:e.$route.query.id}).then(function(t){var r=t.data,n=r.siteId,a=r.levelId,u=r.maxAddMoney,s=(r.authMenu,r.status),i=r.userName,l=(r.password,r.otherName);t.data.authMenu?(e.exitAuthMenu=JSON.parse(t.data.authMenu),e.currentPermission.forEach(function(t){t.newList.forEach(function(t){e.exitAuthMenu.forEach(function(e){for(var r in e.list)r==t.name&&(t.checked=!0)})})})):e.exitAuthMenu=[],n=n.split(","),e.formKey.levelId=a.split(","),e.formKey.userName=i,e.formKey.otherName=l,e.formKey.maxAddMoney=u,e.formKey.id=t.data.id,e.formKey.status=s,e.$refs.SiteSelect.setDefaultSite(n)})})},methods:{createData:function(){var e=[];this.levelPermission.forEach(function(t){t.levels.forEach(function(t){t.checked&&e.push(t.id)})});var t=[];t.forEach(function(e){t.includes(e)||t.push(e)}),this.formKey.levelId=t},checkAll:function(e,t){var r=this;this.$set(e,"indeterminate",!1),this.$set(e,"checked",t),e.levels.forEach(function(e){r.$set(e,"checked",t)}),this.createData()},checkOne:function(e,t,r){this.$set(t,"checked",r);var n=0;e.levels.forEach(function(e){e.checked&&n++}),n?n<e.levels.length?(this.$set(e,"checked",!1),this.$set(e,"indeterminate",!0)):(this.$set(e,"checked",!0),this.$set(e,"indeterminate",!1)):(this.$set(e,"checked",!1),this.$set(e,"indeterminate",!1)),this.createData()},onSiteChange:function(e){var t=this,r=e.id,n=e.siteName;if(r){if(!this.$route.query.id){var a=this.formKey.siteId;if(r.length>a.length){var u={};u.siteId=r[r.length-1],u.siteName=n[n.length-1],u.levels=[],this.$refs.LevelSelect.init(u.siteId).then(function(e){u.levels=e}),this.levelPermission.push(u)}else if(r.length<a.length){var s;a.forEach(function(e){r.forEach(function(t){e==t||r.includes(e)||(s=e)})}),this.levelPermission.forEach(function(e,r){e.siteId==s&&t.levelPermission.splice(r,1)})}this.formKey.siteId=r}if(this.$route.query.id){this.levelPermission=[];var i=this.formKey.siteId.length,l=r.length;if(this.formKey.siteId=r,i===l)return;var o=function(e,r){return new f.a(function(a){var u={};u.siteId=e,u.siteName=n[r],u.levels=[],t.$refs.LevelSelect.init(e).then(function(e){u.levels=e,t.levelPermission.push(u),t.levelPermission.forEach(function(e){var r=0;e.levels.forEach(function(e){t.formKey.levelId.forEach(function(n){e.id==+n&&(r++,t.$set(e,"checked",!0))})}),r?r<e.levels.length?(t.$set(e,"checked",!1),t.$set(e,"indeterminate",!0)):(t.$set(e,"checked",!0),t.$set(e,"indeterminate",!1)):(t.$set(e,"checked",!1),t.$set(e,"indeterminate",!1))})})})};r.forEach(function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o(t,r);case 2:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}())}}r.length||(this.levelPermission=[])},changeCurrentBtn:function(){this.$refs.editPermission.show(),this.changeCurrent(this.currentBtn),this.currentBtn="会员管理"},onLevelChange:function(e){this.formKey.levelId=e},changeCurrent:function(e){this.currentBtn=e},savePremission:function(){this.postData.menu=JSON.parse(c()(this.currentPermission)),this.postData.menu.forEach(function(e){e.newList=e.newList.filter(function(e){return 1==e.checked}),e.newList.forEach(function(e){delete e.checked})}),this.postData.menu.forEach(function(e){e.list={},e.newList.forEach(function(t,r){e.list[t.name]=t.value}),delete e.newList}),this.$refs.editPermission.hide()},saveAll:function(){var e=this;this.$refs.formKey.validate(function(t){if(t){var r=e.formKey,n=r.userName,a=r.password,u=r.otherName,i=r.maxAddMoney,o=r.siteId,d=r.status;i||(e.formKey.maxAddMoney=0);var m=[],f={userName:n,password:a,otherName:u,maxAddMoney:i,siteId:o.join(","),status:d};e.levelPermission.forEach(function(e){for(var t in e)e.levels.forEach(function(e){e.checked&&m.push(e.id)})}),m=l()(new s.a(m)),f.levelId=m.join(","),e.postData.menu.length>1&&(f.menu=c()(e.postData.menu)),"add"==e.$route.params.page?Object(y["m"])(f).then(function(t){200==t.code&&e.$router.push({name:"admin"})}):(f.adminId=e.$route.query.id,Object(y["q"])(f).then(function(t){200==t.code&&e.$router.push({name:"admin"})}))}})}}},k=q,w=(r("824f"),r("2877")),x=Object(w["a"])(k,n,a,!1,null,"22e7ed68",null);t["default"]=x.exports}}]);