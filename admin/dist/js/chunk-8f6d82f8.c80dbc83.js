(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f6d82f8"],{"0a0d":function(e,t,a){e.exports=a("e829")},"2f37":function(e,t,a){var i=a("63b6");i(i.S,"Date",{now:function(){return(new Date).getTime()}})},"3e8f":function(e,t){},5118:function(e,t,a){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new s(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},a("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},"54fd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{attrs:{model:e.imgInfor}},[a("FormItem",{attrs:{label:"终端:"}},[a("CheckboxGroup",{on:{"on-change":e.checkAllGroupChange},model:{value:e.imgInfor.newclient_type,callback:function(t){e.$set(e.imgInfor,"newclient_type",t)},expression:"imgInfor.newclient_type"}},[a("Checkbox",{attrs:{label:"pc",disabled:e.showpc}}),a("Checkbox",{attrs:{label:"h5",disabled:e.showphone}}),a("Checkbox",{attrs:{label:"android",disabled:e.showphone}}),a("Checkbox",{attrs:{label:"ios",disabled:e.showphone}})],1)],1),a("FormItem",[a("table",{staticClass:"ivu-table bt bl br w100",attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",[a("th",{staticClass:"w5 ivu-table-column-center br"},[e._v("排序")]),a("th",{staticClass:"w20 ivu-table-column-center br"},[e._v("标题")]),a("th",{staticClass:"w20 ivu-table-column-center br"},[e._v("跳转地址")]),a("th",{staticClass:"w20 ivu-table-column-center br"},[e._v("时间选择")]),a("th",{staticClass:"w20 ivu-table-column-center br"},[e._v("图片")]),a("th",{staticClass:"w5 ivu-table-column-center br"},[e._v("状态")]),a("th",{staticClass:"w10 ivu-table-column-center"},[e._v("操作")])])]),e.tbodyShow?a("tbody",{ref:"list"},e._l(e.carouselList,function(t,i){return a("tr",{key:"item"+i},[a("td",{staticClass:"w5 ivu-table-column-center br"},[a("Icons",{attrs:{type:"paixukongjian",color:"#dadada",size:"20"}})],1),a("td",{staticClass:"w20 ivu-table-column-center br"},[a("Input",{key:"title"+i,staticClass:"w310x",attrs:{disabled:t.edit},model:{value:t.title,callback:function(a){e.$set(t,"title",a)},expression:"item.title"}})],1),a("td",{staticClass:"w20 ivu-table-column-center br"},[a("FormItem",{key:"foward_type"+i},[a("Select",{staticClass:"w310x pt15",attrs:{transfer:"",disabled:t.edit},model:{value:t.foward_type,callback:function(a){e.$set(t,"foward_type",a)},expression:"item.foward_type"}},e._l(t.options,function(t,i){return a("Option",{key:"options1"+i,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:"1"==t.foward_type,expression:"item.foward_type=='1'"}]},[a("Input",{staticClass:"w310x",attrs:{disabled:t.edit},model:{value:t.target,callback:function(a){e.$set(t,"target",a)},expression:"item.target"}})],1)],1),a("td",{staticClass:"w20 ivu-table-column-center br"},[a("FormItem",[a("Select",{key:"online_type"+i,staticClass:"w310x pt15",attrs:{disabled:t.edit,transfer:""},model:{value:t.online_type,callback:function(a){e.$set(t,"online_type",a)},expression:"item.online_type"}},e._l(t.options2,function(t,i){return a("Option",{key:"options2"+i,attrs:{value:t.value}},[e._v(e._s(t.name))])}),1)],1),"1"==t.online_type?a("div",{staticClass:"pb10"},[a("DatePicker",{key:"date1"+i,staticClass:"w130x",attrs:{type:"date",placeholder:"开始时间",disabled:t.edit,options:e.options3,transfer:""},model:{value:t.Time[0],callback:function(a){e.$set(t.Time,0,a)},expression:"item.Time[0]"}}),a("span",{staticClass:"ml10 mr10"},[e._v("——")]),a("DatePicker",{key:"date2"+i,staticClass:"w130x",attrs:{type:"date",disabled:t.edit,placeholder:"结束时间",options:e.options3,transfer:""},model:{value:t.Time[1],callback:function(a){e.$set(t.Time,1,a)},expression:"item.Time[1]"}})],1):e._e()],1),a("td",{staticClass:"w20 ivu-table-column-center br"},[a("div",{staticClass:"center"},[a("div",{staticClass:"demo-upload-list"},["finished"==t.newstatus?[a("img",{attrs:{src:t.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return e.handleView(t.name)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.handleRemove(t)}}})],1)]:[a("Progress",{attrs:{percent:t.percentage,"hide-info":""}})]],2),a("Upload",{key:"upload"+i,ref:"upload",refInFor:!0,staticClass:"ib w58x",attrs:{disabled:t.edit,"show-upload-list":!1,"default-file-list":e.defaultList,headers:e.uploadForm.headers,action:e.uploadForm.action,data:e.uploadForm.data,name:e.uploadForm.name,"on-success":function(a){e.onUploadSuccess(a,t)},format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag"}},[a("div",{staticClass:"w58x"},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("Modal",{key:"modal"+i,attrs:{title:"图片预览"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?a("img",{staticClass:"w100",attrs:{src:t.url}}):e._e()])],1)]),a("td",{staticClass:"w5 ivu-table-column-center br"},[a("i-switch",{attrs:{size:"large",disabled:t.edit},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关闭")])])],1),a("td",{key:"handle"+i,staticClass:"w10 ivu-table-column-center"},["edit"==e.$route.params.page&&e.showedit||"super"==e.adminType||-1!=e.authInPage.indexOf("slideImgInfoUpt")?a("Button",{attrs:{size:"small"},on:{click:function(a){return e.changedit(t)}}},[e._v(e._s(t.edit?"编辑":"确定"))]):e._e(),!t.edit&&t.del?a("Button",{attrs:{size:"small"},on:{click:function(t){return e.changDetail(i)}}},[e._v("取消")]):e._e(),t.edit||!t.del?a("Button",{attrs:{size:"small"},on:{click:function(t){return e.deleteCarousel(i)}}},[e._v("删除")]):e._e()],1)])}),0):e._e(),a("tfoot",[a("tr",[a("td",{attrs:{colspan:"7"}},[a("Button",{staticClass:"button",attrs:{long:""},on:{click:e.addCarouselItem}},[e._v("添加轮播图")])],1)])])])])],1),a("div",{staticClass:"flex-row"},[a("Button",{staticClass:"w140x ft18",attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认保存")])],1)],1)},n=[],s=(a("7f7f"),a("28a5"),a("bd86")),o=a("5176"),r=a.n(o),l=a("f499"),c=a.n(l),u=(a("ac6a"),a("75fc")),d=a("0a0d"),m=a.n(d),f=a("83ae"),p=a("fa69"),h=a("8593"),b=a("53fe"),v=a.n(b),g=(a("cac8"),a("d027"),a("2934"),a("c276")),w=(a("2f62"),a("5118")),y=(a("3e8f"),{name:"lunboEdit",components:{Tables:p["a"],Icons:f["a"]},data:function(){return{adminType:Object(g["l"])(),authInPage:JSON.parse(localStorage.authInPage),tbodyShow:!0,defaultList:[],imgName:"",showedit:!0,visible:!1,uploadList:[],uploadForm:{headers:{Authorization:Object(g["j"])()},action:"/api/v2/uploadImg",data:{siteId:""},name:"img",defaultList:[],path:"",src:""},options3:{disabledDate:function(e){return e&&e.valueOf()<m()()-864e5}},isModify:-1,showpc:!1,showphone:!1,carouselList:[],oldcarouseList:[],Time:[],imgInfor:{newclient_type:[]}}},created:function(){if("edit"==this.$route.params.page){var e=this.$route.query,t=e.siteId,a=e.promotionId;this.ondeatail({siteId:t,promotionId:a})}"create"==this.$route.params.page&&this.addCarouselItem(),this.sortInit(),this.uploadForm.data.siteId=this.$root.nowSite.id},methods:{sortInit:function(){var e=this;this.tbodyShow=!0,this.$nextTick(function(){var t=e.$refs.list,a=e;v.a.create(t,{onEnd:a.endFunc})})},endFunc:function(e){var t=this,a=Object(u["a"])(this.carouselList),i=a[e.oldIndex];a[e.newIndex];a.splice(e.oldIndex,1),a.splice(e.newIndex,0,i),this.carouselList=[],this.carouselList=Object(u["a"])(a),Object(w["setTimeout"])(function(){t.tbodyShow=!1},10),Object(w["setTimeout"])(function(){t.sortInit()},30)},changedit:function(e){this.showedit=!1,e.edit=!e.edit,this.showedit=!0},checkAllGroupChange:function(e){if(0!=this.imgInfor.newclient_type.length){var t=this.imgInfor.newclient_type.some(function(e){return"pc"==e});t?(this.showpc=!1,this.showphone=!0):(this.showpc=!0,this.showphone=!1)}else this.showpc=!1,this.showphone=!1},submit:function(){var e=this;if("create"==this.$route.params.page){var t=[];if(this.carouselList.forEach(function(a){var i={};i.title=a.title,i.status=0==a.status?"no":"yes",i.foward_type=a.foward_type,"1"==i.foward_type?i.target=a.target:i.target="#",i.online_type=a.online_type,"1"==i.online_type&&(i.publish_at=e.$root.formatTime(a.Time[0]),i.offline_at=e.$root.formatnightTimeS(a.Time[1])),i.img=a.image,t.push(i)}),!this.imgInfor.newclient_type.length)return this.$Message.error("请选择终端"),!1;var a=!1;if(!(t.length>0))return this.$Message.error("请填写轮播信息"),!1;if(t.forEach(function(e){if(""==e.img||""==e.title)return a=!0,!1}),a)return this.$Message.error("请填写轮播信息"),!1;var i={};i.body=c()(t),i.siteId=this.$root.nowSite.id,i.bodyFormatType="JSON",this.imgInfor.newclient_type.length>1?i.clientType=this.imgInfor.newclient_type.join(","):i.clientType=this.imgInfor.newclient_type[0],Object(h["qb"])(i).then(function(t){e.$router.go(-1)})}if("edit"==this.$route.params.page){var n=[];this.carouselList.forEach(function(t){var a={};a.title=t.title,a.status=0==t.status?"no":"yes",a.foward_type=t.foward_type,"1"==a.foward_type?a.target=t.target:a.target="#",a.online_type=t.online_type,"1"==a.online_type&&(a.publish_at=e.$root.formatTime(t.Time[0]),a.offline_at=e.$root.formatnightTimeS(t.Time[1])),a.img=t.image,n.push(a)});a=!1;if(!(n.length>0))return this.$Message.error("请填写轮播信息"),!1;if(n.forEach(function(e){if(""==e.img||""==e.title)return a=!0,!1}),a)return this.$Message.error("请填写轮播信息"),!1;var s={};s.body=c()(n),s.siteId=this.$root.nowSite.id,s.promotionId=this.$route.query.promotionId,Object(h["pb"])(s).then(function(t){e.$router.go(-1)})}},deleteCarousel:function(e){var t=this;this.$Tip.confirm({content:"你确定要删除吗？",onOk:function(){t.carouselList.splice(e,1)}})},changDetail:function(e){var t=this;this.tbodyShow=!1,this.carouselList[e]=r()({},this.oldcarouseList[e]),Object(w["setTimeout"])(function(){t.tbodyShow=!0},10)},ondeatail:function(e){var t=this;Object(h["ob"])(e).then(function(e){var a=e.data,i=a.body,n=a.clientType;JSON.parse(i).forEach(function(e){var a,i=(a={id:"",actionType:"",edit:!0,del:!0,status:"no"!=e.status,image:e.img,target:"",title:e.title,foward_type:e.foward_type},Object(s["a"])(a,"target",e.target),Object(s["a"])(a,"url",e.img),Object(s["a"])(a,"online_type",e.online_type),Object(s["a"])(a,"Time",[e.offline_at,e.publish_at]),Object(s["a"])(a,"newstatus","finished"),Object(s["a"])(a,"options",[{name:"自定义",value:"1"},{name:"真人视讯",value:"2"},{name:"彩票游戏",value:"3"},{name:"棋牌游戏",value:"4"},{name:"电子游艺",value:"5"},{name:"体育投注",value:"6"},{name:"捕鱼达人",value:"7"},{name:"优惠活动",value:"8"}]),Object(s["a"])(a,"options2",[{name:"自定义上线",value:"1"},{name:"即时上线",value:"2"}]),a);t.carouselList.push(i),t.oldcarouseList=JSON.parse(c()(t.carouselList))}),1==n.length?t.imgInfor.newclient_type.push(n):n.split(",").map(function(e){t.imgInfor.newclient_type.push(e)}),t.showpc=!0,t.showphone=!0})},addCarouselItem:function(){var e,t=(e={id:"",actionType:"",image:"",target:"",title:"",status:!1,foward_type:""},Object(s["a"])(e,"target",""),Object(s["a"])(e,"online_type",""),Object(s["a"])(e,"url",""),Object(s["a"])(e,"Time",[]),Object(s["a"])(e,"newstatus","statr"),Object(s["a"])(e,"options",[{name:"自定义",value:"1"},{name:"真人视讯",value:"2"},{name:"彩票游戏",value:"3"},{name:"棋牌游戏",value:"4"},{name:"电子游艺",value:"5"},{name:"体育投注",value:"6"},{name:"捕鱼达人",value:"7"},{name:"优惠活动",value:"8"}]),Object(s["a"])(e,"options2",[{name:"自定义上线",value:"1"},{name:"即时上线",value:"2"}]),e);"edit"==this.$route.params.page&&(t.edit=!1,t.del=!1);var a=Object(u["a"])(this.carouselList);a.push(t),this.carouselList=[],this.carouselList=Object(u["a"])(a),this.isModify=this.carouselList.length-1},deleteCarouselItem:function(e){this.carouselList.splice(e,1)},onUploadSuccess:function(e,t){var a=e.data,i=a.path,n=a.src,s=a.host;i&&(t.newstatus="finished",t.url="".concat(s,"/").concat(n),t.image=i)},handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){e.newstatus="start",e.url="",e.image=""},handleFormatError:function(e){this.$Tip.info({content:"请上传图片"})},handleMaxSize:function(e){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+e.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var e=this.uploadList.length<5;return e||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),e}}}),_=y,I=(a("9aa8"),a("2877")),T=Object(I["a"])(_,i,n,!1,null,"6d1ae9f8",null);t["default"]=T.exports},"5c2c":function(e,t,a){},6017:function(e,t,a){(function(e,t){(function(e,a){"use strict";if(!e.setImmediate){var i,n=1,s={},o=!1,r=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?f():p()?h():e.MessageChannel?b():r&&"onreadystatechange"in r.createElement("script")?v():g(),l.setImmediate=c,l.clearImmediate=u}function c(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var o={callback:e,args:t};return s[n]=o,i(n),n++}function u(e){delete s[e]}function d(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(a,i);break}}function m(e){if(o)setTimeout(m,0,e);else{var t=s[e];if(t){o=!0;try{d(t)}finally{u(e),o=!1}}}}function f(){i=function(e){t.nextTick(function(){m(e)})}}function p(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}function h(){var t="setImmediate$"+Math.random()+"$",a=function(a){a.source===e&&"string"===typeof a.data&&0===a.data.indexOf(t)&&m(+a.data.slice(t.length))};e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(a){e.postMessage(t+a,"*")}}function b(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;m(t)},i=function(t){e.port2.postMessage(t)}}function v(){var e=r.documentElement;i=function(t){var a=r.createElement("script");a.onreadystatechange=function(){m(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a)}}function g(){i=function(e){setTimeout(m,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,a("c8ba"),a("4362"))},"9aa8":function(e,t,a){"use strict";var i=a("5c2c"),n=a.n(i);n.a},e829:function(e,t,a){a("2f37"),e.exports=a("584a").Date.now}}]);