(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6373b822"],{"134a":function(e,t,a){},"2ca4":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("collapse",{attrs:{simple:"",value:"1"}},[a("panel",{attrs:{name:"1","hide-arrow":!0}},[a("div",{staticClass:"title",on:{click:function(t){e.open=!e.open}}},[e._v("返点设置\n      "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.open,expression:"!open"}],attrs:{type:"ios-arrow-down",size:"18",color:"#999"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],attrs:{type:"ios-arrow-forward",size:"18",color:"#999"}})],1),a("div",{staticClass:"section p15",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"btns"},e._l(e.lottMenu,function(t,l){return a("Button",{key:l,staticClass:"lottery mr20",class:e.showKey==t?"bd-bg":"bg-or",on:{click:function(a){return e.onselectLott(t,l)}}},[e._v(e._s(t))])}),1),a("div",{staticClass:"clearfix"},[e.$route.params.page?a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl clearfix h60"},[a("div",{staticClass:"label fl"},[e._v("统一设置：")]),a("Select",{staticClass:"fl",staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{"on-change":e.batchSetRebate},model:{value:e.batchRebate,callback:function(t){e.batchRebate=t},expression:"batchRebate"}},e._l(e.defaultOptions,function(t,l){return a("Option",{key:l,attrs:{value:t}},[e._v(e._s(t)+"%")])}),1)],1),a("div",{staticClass:"fl ml20 clearfix h60"},[a("div",{staticClass:"label fl"},[e._v("批量设置：")]),a("div",{staticClass:"fl"},[a("Button",{attrs:{icon:"ios-remove",size:"small"},on:{click:e.reduceRebate}}),a("Button",{staticClass:"ml20",attrs:{icon:"ios-add",size:"small"},on:{click:e.addRebate}})],1)])]):e._e(),e._l(e.lottSub[e.showKey],function(t){return a("div",{key:t.id,staticClass:"clearfix w25 h40 fl"},[a("div",{staticClass:"label fl"},[e._v(e._s(t.name)+"：")]),e.$route.params.page?a("div",{staticClass:"fl"},[a("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},on:{"on-change":e.selectSingleRabate},model:{value:t.rebate,callback:function(a){e.$set(t,"rebate",a)},expression:"lott.rebate"}},e._l(t.options,function(t,l){return a("Option",{key:l,attrs:{value:t}},[e._v(e._s(t)+"%")])}),1),e.showParent?a("span",{staticClass:"tip"},[e._v("上限："+e._s((+t.parent_rebate).toFixed(2)||"-")+"%")]):e._e()],1):a("div",[e._v(e._s(t.rebate)+"%")])])})],2)])])],1)},n=[],s=a("f499"),r=a.n(s),i=(a("c5f6"),a("ac6a"),a("83ae")),o=a("c276"),c={components:{Icons:i["a"]},props:{data:{type:Array,required:!0,default:function(){return[]}},showParent:{type:Boolean,default:!1}},data:function(){return{open:!1,lottIndex:0,showKey:"六合彩",batchRebate:""}},computed:{defaultOptions:function(){for(var e=[],t=0;t<3;t++)for(var a=0;a<=10;a++){var l=.1*a;e[e.length]=(t+l).toFixed(2)}return e},lottMenu:function(){for(var e=[],t=0;t<this.data.length;t++)e[e.length]=this.data[t].className;return Object(o["n"])(e)},lottSub:function(){for(var e={},t=0;t<this.lottMenu.length;t++){var a=this.lottMenu[t];e[a]=[];for(var l=0;l<this.data.length;l++)if(this.data[l].className===this.lottMenu[t]){var n=e[a].length;this.data[l].options=this.createOptions(+this.data[l].parent_rebate||3),e[a][n]=this.data[l]}}for(var s in e)e[s].forEach(function(e){e.rebate=Number(e.rebate).toFixed(2)});return e}},methods:{batchSetRebate:function(e){e&&(this.lottSub[this.showKey].forEach(function(t){t.rebate=e}),this.createData())},selectSingleRabate:function(){this.createData()},onselectLott:function(e,t){this.lottIndex=t,this.showKey=e,this.batchRebate=""},reduceRebate:function(e){this.lottSub[this.showKey].forEach(function(e){var t=+e.rebate-.1;t=t<=0?0:t,e.rebate=t.toFixed(2)}),this.createData()},addRebate:function(){this.lottSub[this.showKey].forEach(function(e){var t=+e.rebate+.1;t=t>=+e.parent_rebate?+e.parent_rebate:t,e.rebate=t.toFixed(2)}),this.createData()},createOptions:function(e){for(var t=[],a=0;a<e;a++)for(var l=0;l<=10;l++){var n=.1*l;a+n<=e&&t.push((a+n).toFixed(2))}return t},createData:function(){var e={};return this.data.forEach(function(t){var a="CT_".concat(t.id,"_LOTTERY");e[a]=t.rebate}),this.$emit("on-rebate-change",r()(e)),r()(e)}}},u=c,f=(a("8c6e"),a("2877")),h=Object(f["a"])(u,l,n,!1,null,"259de1b0",null),d=h.exports;t["a"]=d},4475:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["单选"===e.mode?a("div",[a("Select",{class:e.className,style:e._width,attrs:{clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder},model:{value:e.singleData.levelLabel,callback:function(t){e.$set(e.singleData,"levelLabel",t)},expression:"singleData.levelLabel"}},e._l(e.levelList,function(t){return a("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(!!t.levelAlias&&(!e.choiceShow&&t.levelAlias)||t.levelName))])}),1)],1):"多选"===e.mode?a("div",[a("Select",{ref:"selector",class:e.className,style:e._width,attrs:{clearable:e.clearable,multiple:"",disabled:e.disabled,placeholder:e.placeholder},model:{value:e.multipleData.levelLabel,callback:function(t){e.$set(e.multipleData,"levelLabel",t)},expression:"multipleData.levelLabel"}},[e.allModal?a("Option",{attrs:{value:"all"}},[e._v("全部")]):e._e(),e._l(e.levelList,function(t){return a("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(t.levelAlias||t.levelName))])})],2)],1):"单选全部"===e.mode?a("div",[a("Select",{class:e.className,style:e._width,attrs:{clearable:e.clearable,disabled:e.disabled,placeholder:e.placeholder},model:{value:e.singleData.levelLabel,callback:function(t){e.$set(e.singleData,"levelLabel",t)},expression:"singleData.levelLabel"}},[e.allModal?a("Option",{attrs:{value:"all"}},[e._v("全部")]):e._e(),e._l(e.levelList,function(t){return a("Option",{key:t.id,attrs:{value:t.levelLabel}},[e._v(e._s(t.levelAlias||t.levelName))])})],2)],1):e._e()])},n=[],s=a("cebc"),r=(a("ac6a"),a("28a5"),a("96cf"),a("3b8d")),i=(a("6762"),a("2fdb"),a("c5f6"),a("8194")),o=a("f28b"),c={props:{choiceShow:{type:Boolean,default:!1},allModal:{type:Boolean,default:!1},mode:{type:String,default:"单选"},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:"请选择"},width:{type:[String,Number],default:260},levelType:{type:String},className:{type:String}},data:function(){return{singleData:{levelLabel:""},multipleData:{levelLabel:[]},levelList:[],subType:""}},computed:{_width:function(){return"width:"+this.width+"px"}},watch:{"multipleData.levelLabel":function(e,t){!t.includes("all")&&e.includes("all")&&(this.multipleData.levelLabel=["all"]),t.includes("all")&&e.length>1&&this.multipleData.levelLabel.splice(e.indexOf("all"),1)},singleData:{handler:function(e,t){this.singleChange(e)},deep:!0},multipleData:{handler:function(e,t){this.multipleChange(e)},deep:!0},allModal:function(){this.checkAll()}},mounted:function(){this.checkAll()},methods:{checkAll:function(){},setDefaultLevel:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var l,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:"单选"===this.mode?(this.singleData.levelLabel=+t,this.singleData.levelName=a,this.$set(this.singleData,"levelLabel",+t)):"string"==typeof t?(l=t.split(","),l.forEach(function(e){n.multipleData.levelLabel.push(Number(e))})):this.multipleData.levelLabel=t;case 1:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),init:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var l,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("member"!==this.levelType){e.next=11;break}if("addLevel"!==this.subType){e.next=6;break}this.levelList=this.$store.state.info.memberLevelList,this.subType="",e.next=9;break;case 6:return e.next=8,this.getMemberLevel(t,"select");case 8:this.levelList=e.sent;case 9:e.next=18;break;case 11:if("agency"!==this.levelType){e.next=17;break}return e.next=14,this.getAgencyLevel(t,"select");case 14:this.levelList=e.sent,e.next=18;break;case 17:"refund"===this.levelType&&(this.levelList=this.$store.state.info.memberLevelList);case 18:return a&&(l=a.levelLabel,n=a.levelName,this.setDefaultLevel(l,n)),e.abrupt("return",this.levelList);case 20:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),singleChange:function(e){if(this.multipleData.levelLabel.includes("all")){var t={levelLabel:[],levelName:[]},a=[];this.levelList.forEach(function(e){t.levelLabel.push(e.levelLabel),t.levelName.push(e.levelName),a.push(e.levelLabel)}),this.$emit("on-level-change",t)}else{var l=Object(s["a"])({},this.singleData);this.levelList.forEach(function(t){e.levelLabel==t.levelLabel&&(l.levelName=t.levelName,l.id=t.id)}),this.$emit("on-level-change",l)}},multipleChange:function(e){if(this.multipleData.levelLabel.includes("all")){var t={levelLabel:[],levelName:[]},a=[];this.levelList.forEach(function(e){t.levelLabel.push(e.levelLabel),t.levelName.push(e.levelName),a.push(e.levelLabel)}),this.$emit("on-level-change",t)}else{var l=Object(s["a"])({},this.multipleData);l.levelName=[],this.levelList.forEach(function(e){l.levelLabel&&l.levelLabel.forEach(function(t){t==e.levelLabel&&l.levelName.push(e.levelName)})}),this.$emit("on-level-change",l)}},getMemberLevel:function(e,t){var a=this;return Object(i["e"])({siteId:e,purpose:t}).then(function(e){return a.$emit("sendLevelName",e.data),e.data})},getAgencyLevel:function(e,t){return Object(o["l"])({siteId:e,purpose:t}).then(function(e){return e.data})},reset:function(e){"undefined"===typeof e?this.multipleData.levelLabel=[]:"single"===e&&(this.singleData.levelLabel="")},changeSubType:function(e){this.subType=e}}},u=c,f=a("2877"),h=Object(f["a"])(u,l,n,!1,null,null,null),d=h.exports;t["a"]=d},"5c64":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("collapse",{attrs:{simple:"",value:"1"}},[a("panel",{attrs:{name:"1","hide-arrow":!0}},[a("div",{staticClass:"title",on:{click:function(t){e.open=!e.open}}},[e._v("\n      返水设置\n      "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.open,expression:"!open"}],attrs:{type:"ios-arrow-down",size:"18",color:"#999"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],attrs:{type:"ios-arrow-forward",size:"18",color:"#999"}})],1),a("div",{staticClass:"section p15",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"btns"},e._l(e._data_,function(t,l){return a("Button",{key:t.name,staticClass:"lottery mr20",class:e.showKey==l?"bd-bg":"bg-or",on:{click:function(t){return e.onselectMenu(l)}}},[e._v(e._s(t.name))])}),1),e._data_[e.showKey]?a("div",{staticClass:"clearfix info pt10"},e._l(e._data_[e.showKey].list,function(t){return a("div",{key:t.name_en,staticClass:"clearfix w20 h40 fl"},[a("div",{staticClass:"label fl"},[e._v(e._s(t.name_cn)+"：")]),e.$route.params.page?a("div",{staticClass:"fl"},[a("InputNumber",{staticClass:"w60xh36",attrs:{step:.1,max:t.parent_refund,min:0},on:{"on-change":e.onChange},model:{value:t.refund,callback:function(a){e.$set(t,"refund",a)},expression:"sub.refund"}}),e.showParent?a("span",{staticClass:"tip"},[a("span",{staticClass:"mr5"},[e._v("上限")]),e._v("\n              "+e._s(t.parent_refund.toFixed(2)||"-")+"\n            ")]):e._e()],1):a("div",[e._v(e._s(t.refund))])])}),0):e._e()])])],1)},n=[],s=a("f499"),r=a.n(s),i=(a("ac6a"),a("cebc")),o=a("83ae"),c=(a("c276"),{components:{Icons:o["a"]},props:{data:{type:[Object,Array],required:!0,default:function(){}},showParent:{type:Boolean,required:!1,default:!1}},data:function(){return{open:!1,showKey:"live"}},computed:{_data_:function(){var e=Object(i["a"])({},this.data);for(var t in e)e[t].list.forEach(function(e){e.refund=+e.refund,e.parent_refund=+e.parent_refund});return e}},methods:{onselectMenu:function(e){this.showKey=e},onChange:function(e){this.createData()},createData:function(){var e={};for(var t in this._data_)this._data_[t].list.forEach(function(t){e[t.name_en]=t.refund});return this.$emit("on-refund-change",r()(e)),r()(e)}}}),u=c,f=(a("6e9d"),a("2877")),h=Object(f["a"])(u,l,n,!1,null,"deef8c56",null),d=h.exports;t["a"]=d},"6e9d":function(e,t,a){"use strict";var l=a("134a"),n=a.n(l);n.a},7583:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"formKey",staticClass:"mt10",attrs:{"label-width":100,model:e.formKey,rules:e.rules}},[a("FormItem",{attrs:{label:"代理类型"}},[a("Select",{staticClass:"w340x",model:{value:e.formKey.agencyType,callback:function(t){e.$set(e.formKey,"agencyType",t)},expression:"formKey.agencyType"}},[a("Option",{attrs:{value:"agency"}},[e._v("代理")]),a("Option",{attrs:{value:"shareholder"}},[e._v("大股东")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.showFlag,expression:"showFlag"}],attrs:{label:"上级代理",required:""}},[a("AutoSearch",{ref:"autoSearch",attrs:{width:340,clearable:!1,placeholder:"上级代理账号，默认查询"},on:{sendSuperior:e.getSuperior}})],1),a("FormItem",{attrs:{label:e.showFlag?"代理账号":"大股东账号",prop:"userName"}},[a("Input",{staticClass:"w340x",attrs:{placeholder:"6-20位数字或字母"},model:{value:e.formKey.userName,callback:function(t){e.$set(e.formKey,"userName",t)},expression:"formKey.userName"}})],1),a("FormItem",{attrs:{label:"默认密码"}},[a("Input",{staticClass:"w340x",attrs:{disabled:""},model:{value:e.formKey.passwd,callback:function(t){e.$set(e.formKey,"passwd",t)},expression:"formKey.passwd"}})],1),a("FormItem",{attrs:{label:"会员等级"}},[a("LevelSelect",{ref:"levelSelect",staticClass:"ib",attrs:{width:"340",levelType:"agency"},on:{"on-level-change":e.onLevelChange}}),a("Poptip",{staticClass:"ml10",attrs:{trigger:"hover",content:"此代理下新注册会员会归属到指定会员等级",placement:"right-start"}},[a("Icons",{attrs:{type:"bangzhutishi",size:20,color:"#b6afaf"}})],1)],1),a("FormItem",{attrs:{label:"状态"}},[a("Select",{staticClass:"w340x",model:{value:e.formKey.status,callback:function(t){e.$set(e.formKey,"status",t)},expression:"formKey.status"}},[a("Option",{attrs:{value:"yes"}},[e._v("开启")]),a("Option",{attrs:{value:"no"}},[e._v("关闭")])],1)],1),a("FormItem",{attrs:{label:"备注信息"}},[a("Input",{staticClass:"w340x h80",attrs:{type:"textarea",rows:4,placeholder:"此栏位仅供管理者记录其他资讯，会员无法检视"},model:{value:e.formKey.remark,callback:function(t){e.$set(e.formKey,"remark",t)},expression:"formKey.remark"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.rebateShow,expression:"rebateShow"}]},[a("rebate-select",{ref:"rebateSelect",attrs:{data:e.rebate},on:{"on-rebate-change":e.onRebateChange}}),a("refund-select",{ref:"refundSelect",attrs:{data:e.refund},on:{"on-refund-change":e.onRefundChange}})],1),a("FormItem",[a("Button",{staticClass:"ivu-btn bg mt15 w340 ft20",attrs:{loading:e.$root.editBtnLoading},on:{click:e.submit}},[e._v("确认新增")])],1)],1)],1)},n=[],s=a("cebc"),r=(a("ac6a"),a("7f7f"),a("83ae")),i=a("5c64"),o=a("2ca4"),c=a("4475"),u=a("f28b"),f=a("ded5"),h={name:"agencyAdd",components:{Icons:r["a"],LevelSelect:c["a"],RefundSelect:i["a"],RebateSelect:o["a"],AutoSearch:f["a"]},data:function(){return{showFlag:!0,rebateShow:!1,rebate:[],refund:{},formKey:{agencyType:"agency",passwd:"123456"},rules:{userName:[{required:!0,message:"请输入正确的账号",trigger:"blur"},{pattern:/^[A-Za-z0-9_]{6,20}$/,message:"6-20位数字或字母",trigger:"blur"}]}}},watch:{"formKey.agencyType":function(e,t){if(this.resetForm(),"agency"==e)this.showFlag=!0,this.formKey={agencyType:e,passwd:"123456"},this.rebateShow=!1,this.formKey.superiorUserName&&(this.rebateShow=!0);else{this.showFlag=!1,this.formKey={agencyType:e,passwd:"abc1233123"},this.rebateShow=!1;var a={uname:"",siteId:this.$root.nowSite.id};this.getRebateSetting(a)}},"$root.nowSite":{handler:function(e,t){var a=this;this.$nextTick(function(){var t=a.$route.name;"agencyAdd"===t&&a.$refs.levelSelect.init(e.id)})},deep:!0,immediate:!0}},beforeRouteEnter:function(e,t,a){a(function(e){e.$router.push({name:"agencyAdd",params:{page:"create"}})})},methods:{resetForm:function(){for(var e in this.formKey)this.formKey[e]=""},onLevelChange:function(e){this.formKey.levelId=e.levelLabel},getSuperior:function(e){if(0==e)this.rebateShow=!1;else{this.formKey.superiorUserName=e;var t={uname:e,siteId:this.$root.nowSite.id};this.getRebateSetting(t)}},onRebateChange:function(e){this.formKey.rebate=e},onRefundChange:function(e){this.formKey.platform=e},getRebateSetting:function(e){var t=this;Object(u["k"])(e).then(function(e){var a=e.data,l=a.rebate,n=a.platform;for(var s in l.forEach(function(e){e.parent_rebate=e.rebate}),t.rebate=l,n)n[s].list.forEach(function(e){e.parent_refund=e.value,e.name_cn=e.name,e.name_en=e.key,e.refund=e.value});t.refund=n,t.rebateShow=!0})},submit:function(){var e=this;this.$refs.formKey.validate(function(t){if(t){e.formKey.rebate||(e.formKey.rebate=e.$refs.rebateSelect.createData()),e.formKey.platform||(e.formKey.platform=e.$refs.refundSelect.createData());var a=Object(s["a"])({},e.formKey,{siteId:e.$root.nowSite.id});Object(u["a"])(a).then(function(t){var a="agency"==e.formKey.agencyType?"新增代理成功":"新增大股东成功";e.$Tip.success({content:a,onOk:function(){e.goAgencySearch()}})})}})},goAgencySearch:function(){this.$router.push({name:"agencySearch"})}}},d=h,v=(a("8dd8"),a("2877")),p=Object(v["a"])(d,l,n,!1,null,"12dab1f6",null);t["default"]=p.exports},"8c6e":function(e,t,a){"use strict";var l=a("fac7"),n=a.n(l);n.a},"8dd8":function(e,t,a){"use strict";var l=a("c83d"),n=a.n(l);n.a},c83d:function(e,t,a){},fac7:function(e,t,a){}}]);